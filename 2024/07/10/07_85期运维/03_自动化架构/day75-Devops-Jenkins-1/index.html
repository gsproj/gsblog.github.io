

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="GongSheng">
  <meta name="keywords" content="">
  
    <meta name="description" content="Devops架构-Jenkins-01今日内容：  了解什么是Jenkins Jenkins的安装部署方法 Jenkins项目01-执行Shell命令 Jenkins项目02-拉取Gitlab上的代码 Jenkins项目03-基于tag标签拉取代码并部署  一、Jenkins概述1.1 什么是jenkins？ Jenkins 是一个开源持续集成的工具，是由 JAVA 开发而成。 Jenkins 是">
<meta property="og:type" content="article">
<meta property="og:title" content="day75-Devops-Jenkins(一)">
<meta property="og:url" content="http://gsproj.github.io/2024/07/10/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day75-Devops-Jenkins-1/index.html">
<meta property="og:site_name" content="迎风之豚的博客">
<meta property="og:description" content="Devops架构-Jenkins-01今日内容：  了解什么是Jenkins Jenkins的安装部署方法 Jenkins项目01-执行Shell命令 Jenkins项目02-拉取Gitlab上的代码 Jenkins项目03-基于tag标签拉取代码并部署  一、Jenkins概述1.1 什么是jenkins？ Jenkins 是一个开源持续集成的工具，是由 JAVA 开发而成。 Jenkins 是">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240710161846461.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240710170638209.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240710170821653.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240710171001392.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240710171016406.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240710171058647.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711101432320.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711101659999.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711101736521.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711101839876.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711103524016.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711103612754.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711103919767.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711103954785.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711104102760.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711104436711.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711104605946.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711104657353.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711104759585.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711105506122.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711105045248.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711105207611.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711105803093.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711105843911.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711161908008.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711162340899.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711163804902.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711164141296.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711164232384.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711164415115.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711164557175.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711164638257.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711164700596.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711164800148.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711164933353.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711165255458.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711165418871.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240711165439642.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712152752448.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712152944584.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712152849438.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712153652948.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712153746480.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712154851445.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712155103133.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712155155500.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712161314975.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712163249672.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712163503837.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712163726106.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712163815888.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712163955122.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712164059363.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712165756849.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712165959106.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712170041378.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712170255940.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712170412733.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712171555867.png">
<meta property="og:image" content="http://gsproj.github.io/img/image-20240712171619376.png">
<meta property="article:published_time" content="2024-07-10T03:08:52.000Z">
<meta property="article:modified_time" content="2024-08-02T01:48:34.361Z">
<meta property="article:author" content="GongSheng">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://gsproj.github.io/img/image-20240710161846461.png">
  
  
  
  <title>day75-Devops-Jenkins(一) - 迎风之豚的博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"gsproj.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Haris的博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="day75-Devops-Jenkins(一)"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-07-10 11:08" pubdate>
          2024年7月10日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          2.7k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          23 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">day75-Devops-Jenkins(一)</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Devops架构-Jenkins-01"><a href="#Devops架构-Jenkins-01" class="headerlink" title="Devops架构-Jenkins-01"></a>Devops架构-Jenkins-01</h1><p>今日内容：</p>
<ul>
<li>了解什么是Jenkins</li>
<li>Jenkins的安装部署方法</li>
<li>Jenkins项目01-执行Shell命令</li>
<li>Jenkins项目02-拉取Gitlab上的代码</li>
<li>Jenkins项目03-基于tag标签拉取代码并部署</li>
</ul>
<h1 id="一、Jenkins概述"><a href="#一、Jenkins概述" class="headerlink" title="一、Jenkins概述"></a>一、Jenkins概述</h1><h2 id="1-1-什么是jenkins？"><a href="#1-1-什么是jenkins？" class="headerlink" title="1.1 什么是jenkins？"></a>1.1 什么是jenkins？</h2><ul>
<li>Jenkins 是一个开源持续集成的工具，是由 JAVA 开发而成。</li>
<li>Jenkins 是一个调度平台，本身不处理任何事情，调用插件来完成所有的工作</li>
</ul>
<p>可以通过jenkins来完成CI&#x2F;CD</p>
<h2 id="1-2-Jenkins的生态架构"><a href="#1-2-Jenkins的生态架构" class="headerlink" title="1.2 Jenkins的生态架构"></a>1.2 Jenkins的生态架构</h2><p>jenkins能将各种开源软件集成为一体，从而实现不同功能的调度工作</p>
<p><img src="/../../../img/image-20240710161846461.png" srcset="/img/loading.gif" lazyload alt="image-20240710161846461"></p>
<h1 id="二、Jenkins安装部署"><a href="#二、Jenkins安装部署" class="headerlink" title="二、Jenkins安装部署"></a>二、Jenkins安装部署</h1><h2 id="2-1-环境准备"><a href="#2-1-环境准备" class="headerlink" title="2.1 环境准备"></a>2.1 环境准备</h2><table>
<thead>
<tr>
<th>系统要求&#x2F;软件要求</th>
<th>主机名</th>
<th>配置</th>
<th>ip</th>
</tr>
</thead>
<tbody><tr>
<td>用于部署jenkins</td>
<td>devops02</td>
<td>2c4G</td>
<td>10.0.0.72&#x2F;172.16.1.72</td>
</tr>
</tbody></table>
<p>需要在机器中安装jenkins，安装Jenkins只需要简单几步即可完成。</p>
<p>Jenkins的安装方式很多，可参考Jenkins官方安装文档  </p>
<h2 id="2-2-安装jenkins"><a href="#2-2-安装jenkins" class="headerlink" title="2.2 安装jenkins"></a>2.2 安装jenkins</h2><h3 id="2-2-1-部署JDK"><a href="#2-2-1-部署JDK" class="headerlink" title="2.2.1 部署JDK"></a>2.2.1 部署JDK</h3><p>jenkins依赖jdk运行，需要先部署JDK</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum install -y java-11</code></pre></div></figure>



<h3 id="2-2-2-部署Jenkins（指定安装源版）"><a href="#2-2-2-部署Jenkins（指定安装源版）" class="headerlink" title="2.2.2 部署Jenkins（指定安装源版）"></a>2.2.2 部署Jenkins（指定安装源版）</h3><blockquote>
<p>适用于网络较好的环境</p>
</blockquote>
<p>1、配置jenkins repo源</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">[root@devops02 ~]# cat &#x2F;etc&#x2F;yum.repos.d&#x2F;jenkins.repo
[jenkins]
name&#x3D;Jenkins-stable
baseurl&#x3D;http:&#x2F;&#x2F;pkg.jenkins.io&#x2F;redhat-stable
gpgcheck&#x3D;0</code></pre></div></figure>

<p>2、安装jenkins</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">[root@devops02 ~]# yum install jenkins -y</code></pre></div></figure>

<p>3、启动服务</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">[root@devops02 ~]# systemctl start jenkins
[root@devops02 ~]# systemctl enable jenkins</code></pre></div></figure>



<h3 id="2-2-3-部署Jenkins（下载rpm包安装–采用）"><a href="#2-2-3-部署Jenkins（下载rpm包安装–采用）" class="headerlink" title="2.2.3 部署Jenkins（下载rpm包安装–采用）"></a>2.2.3 部署Jenkins（下载rpm包安装–采用）</h3><p>从官网下载rpm包，再使用yum安装</p>
<blockquote>
<p>官网找不到或者下载慢，可以从镜像网站下载</p>
<p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/jenkins/redhat/">https://mirrors.tuna.tsinghua.edu.cn/jenkins/redhat/</a></p>
</blockquote>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">#1. 下载安装包
wget https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;jenkins&#x2F;redhat&#x2F;jenkins-2.467-1.1.noarch.rpm

#2. 安装rpm包
yum localinstall -y jenkins-2.467-1.1.noarch.rpm
rpm -ql jenkins

#3.启动
systemctl enable jenkins
systemctl start jenkins
systemctl status jenkins.service</code></pre></div></figure>

<blockquote>
<p>遇到的问题：</p>
<p>实验第一次安装的是最新的jenkins，因为JDK不匹配（官网要求JDK17，实际安装的JDK11），导致服务起不来</p>
<p><img src="/../../../img/image-20240710170638209.png" srcset="/img/loading.gif" lazyload alt="image-20240710170638209"></p>
<p>重新安装的JDK17可以解决</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">&gt;# 下载
&gt;wget https:&#x2F;&#x2F;download.oracle.com&#x2F;java&#x2F;17&#x2F;latest&#x2F;jdk-17_linux-x64_bin.rp&#x3D;m</code></pre></div></figure>
</blockquote>
<h3 id="2-2-4-解锁Jenkins"><a href="#2-2-4-解锁Jenkins" class="headerlink" title="2.2.4 解锁Jenkins"></a>2.2.4 解锁Jenkins</h3><p>访问<a href="http://10.0.0.72:8080，先要配置密码解锁">http://10.0.0.72:8080，先要配置密码解锁</a></p>
<p><img src="/../../../img/image-20240710170821653.png" srcset="/img/loading.gif" lazyload alt="image-20240710170821653"></p>
<p>到了插件页面，选择“关闭”，插件后续再来安装</p>
<p><img src="/../../../img/image-20240710171001392.png" srcset="/img/loading.gif" lazyload alt="image-20240710171001392"></p>
<p>提示安装完成</p>
<p><img src="/../../../img/image-20240710171016406.png" srcset="/img/loading.gif" lazyload alt="image-20240710171016406"></p>
<p>进到Jenkins管理界面</p>
<p><img src="/../../../img/image-20240710171058647.png" srcset="/img/loading.gif" lazyload alt="image-20240710171058647"></p>
<h3 id="2-2-5-安装插件"><a href="#2-2-5-安装插件" class="headerlink" title="2.2.5 安装插件"></a>2.2.5 安装插件</h3><table>
<thead>
<tr>
<th>Jenkins插件安装方式</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>web页面,选择与安装(联网)</td>
<td>一个一个找选择,安装重启jenkins</td>
</tr>
<tr>
<td>自己下载插件,jenkins替你安装(hpi)</td>
<td>web页面一个一个安装,未来批量安装需要脚本</td>
</tr>
<tr>
<td>导入插件(手动,批量)</td>
<td>去一个机器上面把已经下载安装的插件打包,新机器解压,修改所有者</td>
</tr>
</tbody></table>
<p><font color=red>⚠ ⚠ ⚠ jenkins不同版本的插件不通用.</font></p>
<p>三种方式的对比：</p>
<ol>
<li>联网安装（通过互联网下载插件）<ul>
<li>需要知道插件名称 ( 需要知道要集成哪些软件或服务; )</li>
<li>在哪个位置进行插件安装 Manage Jenkins –&gt; Mange Plugins</li>
<li>缺点1：安装会比较的慢</li>
<li>缺点2：如果出现警告,要看提示，不要盲目升级，很容易造成 Jenkins连带升级, 会出现其他很多插件无法使用</li>
</ul>
</li>
<li>离线安装（下载 .hpi 文件安装）<ul>
<li>如GIT插件：<a target="_blank" rel="noopener" href="https://mirror.tuna.tsinghua.edu.cn/jenkins/plugins/git/latest/git.hpi">https://mirror.tuna.tsinghua.edu.cn/jenkins/plugins/git/latest/git.hpi</a></li>
</ul>
</li>
<li>导入插件（目录复制）<ul>
<li>将此前已经安装好的插件备份下来，然后恢复</li>
<li>问题: 插件存储在哪个路径下：&#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;plugins&#x2F;</li>
</ul>
</li>
</ol>
<h4 id="a）离线安装插件"><a href="#a）离线安装插件" class="headerlink" title="a）离线安装插件"></a>a）离线安装插件</h4><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 将离线插件包解压到jenkins插件目录中
[root@devops02 &#x2F;app&#x2F;rpms]#tar -xf jenkins-2.361-plugins.tar.gz -C &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;plugins&#x2F;

# 重启服务
[root@devops02 &#x2F;app&#x2F;rpms]#systemctl restart jenkins</code></pre></div></figure>



<h4 id="b）联网安装插件"><a href="#b）联网安装插件" class="headerlink" title="b）联网安装插件"></a>b）联网安装插件</h4><p>首页 —&gt; 系统管理</p>
<p><img src="/../../../img/image-20240711101432320.png" srcset="/img/loading.gif" lazyload alt="image-20240711101432320"></p>
<p>选择插件管理</p>
<p><img src="/../../../img/image-20240711101659999.png" srcset="/img/loading.gif" lazyload alt="image-20240711101659999"></p>
<p>选择需要安装的插件</p>
<p><img src="/../../../img/image-20240711101736521.png" srcset="/img/loading.gif" lazyload alt="image-20240711101736521"></p>
<p>等待安装完成</p>
<p><img src="/../../../img/image-20240711101839876.png" srcset="/img/loading.gif" lazyload alt="image-20240711101839876"></p>
<blockquote>
<p>安装好之后的存放地点</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">[root@devops02 &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;plugins]#ls github-api.jpi</code></pre></div></figure>
</blockquote>
<h1 id="三、案例01-Jenkins执行Shell命令"><a href="#三、案例01-Jenkins执行Shell命令" class="headerlink" title="三、案例01-Jenkins执行Shell命令"></a>三、案例01-Jenkins执行Shell命令</h1><p>通过jenkins执行命令或脚本</p>
<h2 id="3-1-Jenkins的运行用户配置"><a href="#3-1-Jenkins的运行用户配置" class="headerlink" title="3.1 Jenkins的运行用户配置"></a>3.1 Jenkins的运行用户配置</h2><blockquote>
<p>为了方便JK进行操作与管理各种节点，避免出现权限问题。<br>这里把把jenkins运行用户改为root。<br>当然也可以给Jenkins配置sudo权限，这里我们选择修改为root。  </p>
</blockquote>
<p>修改配置文件（有两种版本，按实际配置）</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 版本一：&#x2F;etc&#x2F;sysconfig&#x2F;jenkins 
[root@devops02 &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;plugins]#grep &quot;^JEN&quot; &#x2F;etc&#x2F;sysconfig&#x2F;jenkins 
JENKINS_HOME&#x3D;&quot;&#x2F;var&#x2F;lib&#x2F;jenkins&quot;
JENKINS_JAVA_CMD&#x3D;&quot;&quot;
JENKINS_USER&#x3D;&quot;root&quot;	# 改成root
...

# 版本二：&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;jenkins.service
User&#x3D;root
Group&#x3D;root

## 再重启服务
systemctl daemon-reload
systemctl restart jenkins</code></pre></div></figure>



<h2 id="3-2-案例详细步骤"><a href="#3-2-案例详细步骤" class="headerlink" title="3.2 案例详细步骤"></a>3.2 案例详细步骤</h2><p>需要执行的shell脚本</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">case &quot;$choose&quot; in
	dev) echo &quot;部署到测试环境&quot; ;;
	prod) echo &quot;部署到生产环境&quot; ;;
esac</code></pre></div></figure>

<h3 id="3-2-1-创建对应的目录"><a href="#3-2-1-创建对应的目录" class="headerlink" title="3.2.1 创建对应的目录"></a>3.2.1 创建对应的目录</h3><p>主界面—&gt;新建任务—&gt;创建dev文件夹</p>
<p><img src="/../../../img/image-20240711103524016.png" srcset="/img/loading.gif" lazyload alt="image-20240711103524016"></p>
<p>下一步继续填写信息，保存即可</p>
<p><img src="/../../../img/image-20240711103612754.png" srcset="/img/loading.gif" lazyload alt="image-20240711103612754"></p>
<p>prod文件夹同上操作，添加完有两个</p>
<p><img src="/../../../img/image-20240711103919767.png" srcset="/img/loading.gif" lazyload alt="image-20240711103919767"></p>
<h3 id="3-2-2-创建freestyle项目"><a href="#3-2-2-创建freestyle项目" class="headerlink" title="3.2.2 创建freestyle项目"></a>3.2.2 创建freestyle项目</h3><p>进入dev文件夹—&gt;新建item</p>
<p><img src="/../../../img/image-20240711103954785.png" srcset="/img/loading.gif" lazyload alt="image-20240711103954785"></p>
<p>填写任务名，选择项目类型</p>
<blockquote>
<p>自由风格: 一般用于部署静态，各种都可以  </p>
<p>maven项目：java代码  </p>
<p>流水线（pipeline)：把第1个或第2个任务通过指令（代码）方式实现。  </p>
</blockquote>
<p><img src="/../../../img/image-20240711104102760.png" srcset="/img/loading.gif" lazyload alt="image-20240711104102760"></p>
<h3 id="3-2-3-配置项目基础信息"><a href="#3-2-3-配置项目基础信息" class="headerlink" title="3.2.3 配置项目基础信息"></a>3.2.3 配置项目基础信息</h3><h4 id="a）配置–丢弃旧的构建"><a href="#a）配置–丢弃旧的构建" class="headerlink" title="a）配置–丢弃旧的构建"></a>a）配置–丢弃旧的构建</h4><p>构建 &#x3D;&#x3D;&#x3D; 运行任务，建议开启功能，保留运行记录</p>
<blockquote>
<p>根据需求填写保存天数和保存的最大个数</p>
</blockquote>
<p><img src="/../../../img/image-20240711104436711.png" srcset="/img/loading.gif" lazyload alt="image-20240711104436711"></p>
<h4 id="b）配置-参数化构建过程"><a href="#b）配置-参数化构建过程" class="headerlink" title="b）配置-参数化构建过程"></a>b）配置-参数化构建过程</h4><p>勾选–参数化构建过程–添加参数–选项参数</p>
<p><img src="/../../../img/image-20240711104605946.png" srcset="/img/loading.gif" lazyload alt="image-20240711104605946"></p>
<p>填写信息</p>
<p><img src="/../../../img/image-20240711104657353.png" srcset="/img/loading.gif" lazyload alt="image-20240711104657353"></p>
<h4 id="c）配置-构建步骤"><a href="#c）配置-构建步骤" class="headerlink" title="c）配置-构建步骤"></a>c）配置-构建步骤</h4><p>新增构建步骤–执行shell</p>
<p><img src="/../../../img/image-20240711104759585.png" srcset="/img/loading.gif" lazyload alt="image-20240711104759585"></p>
<p>配置命令或代码，再保存即可</p>
<p><img src="/../../../img/image-20240711105506122.png" srcset="/img/loading.gif" lazyload alt="image-20240711105506122"></p>
<p>命令如下：</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">case &quot;$choose&quot; in
	dev) echo &quot;部署到测试环境&quot; ;;
	prod) echo &quot;部署到生产环境&quot; ;;
esac
echo &quot;当前用户是：&#96;whoami&#96;&quot;
echo &quot;前路径是: &#96;pwd&#96;&quot;</code></pre></div></figure>



<h3 id="3-2-4-运行项目"><a href="#3-2-4-运行项目" class="headerlink" title="3.2.4 运行项目"></a>3.2.4 运行项目</h3><h4 id="a）构建运行项目"><a href="#a）构建运行项目" class="headerlink" title="a）构建运行项目"></a>a）构建运行项目</h4><p>保存后，在工程界面运行</p>
<p><img src="/../../../img/image-20240711105045248.png" srcset="/img/loading.gif" lazyload alt="image-20240711105045248"></p>
<p>选择</p>
<p><img src="/../../../img/image-20240711105207611.png" srcset="/img/loading.gif" lazyload alt="image-20240711105207611"></p>
<h4 id="b）检查输出"><a href="#b）检查输出" class="headerlink" title="b）检查输出"></a>b）检查输出</h4><p>左下角构建历史可以检查输出，红的是失败的，绿的是成功</p>
<p><img src="/../../../img/image-20240711105803093.png" srcset="/img/loading.gif" lazyload alt="image-20240711105803093"></p>
<p>可以点进去检查控制台输出，要是有错修改项目信息就可以</p>
<blockquote>
<p>实验中因为命令中少写一个<code>&quot;</code>号，头几次运行都是失败的</p>
</blockquote>
<p><img src="/../../../img/image-20240711105843911.png" srcset="/img/loading.gif" lazyload alt="image-20240711105843911"></p>
<h1 id="四、案例02-Jenkins从Gitlab拉取代码（基于branch）"><a href="#四、案例02-Jenkins从Gitlab拉取代码（基于branch）" class="headerlink" title="四、案例02-Jenkins从Gitlab拉取代码（基于branch）"></a>四、案例02-Jenkins从Gitlab拉取代码（基于branch）</h1><h2 id="4-1-准备windows环境"><a href="#4-1-准备windows环境" class="headerlink" title="4.1 准备windows环境"></a>4.1 准备windows环境</h2><p>1、安装git、创建密钥</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ cat &#x2F;c&#x2F;Users&#x2F;gs&#x2F;.ssh&#x2F;id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+0VQ2&#x2F;Zas4iOqt3Zf1BasDAm1ImZNQP64eqlXgchksMVwl&#x2F;qE9qbrG2dR&#x2F;y0wfORJihAOuhCImrYqPArWFfajipietmk14fmAhgzZp6xy6F+6cbdTPRzauwYKCahvLt8ssinVfd2tqbIdkBsyuzrjoO6FBCtQTC17b32lKUtjMe&#x2F;iC+x5PErFaX6x8ZfolUvWiD+yiGY...</code></pre></div></figure>

<p>2、登录gitlab，创建空项目：myproj</p>
<p><img src="/../../../img/image-20240711161908008.png" srcset="/img/loading.gif" lazyload alt="image-20240711161908008"></p>
<p>3、配置ssh密钥认证</p>
<p><img src="/../../../img/image-20240711162340899.png" srcset="/img/loading.gif" lazyload alt="image-20240711162340899"></p>
<p>4、本地创建项目文件夹，初始化上传至gitlab</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gs@LAPTOP-GS MINGW64 ~&#x2F;Desktop
$ mkdir myproj

gs@LAPTOP-GS MINGW64 ~&#x2F;Desktop
$ cd myproj&#x2F;

# 初始化
gs@LAPTOP-GS MINGW64 ~&#x2F;Desktop&#x2F;myproj
$ git init
Initialized empty Git repository in C:&#x2F;Users&#x2F;gs&#x2F;Desktop&#x2F;myproj&#x2F;.git&#x2F;

# 配置远程仓库地址（需要提前配置hosts解析）
$ git remote add origin http:&#x2F;&#x2F;gitlab.test.cn&#x2F;dev&#x2F;myproj.git

# 创建代码
gs@LAPTOP-GS MINGW64 ~&#x2F;Desktop&#x2F;myproj (master)
$ echo &quot;hello myproj&quot; &gt;&gt; index.html

# 上传代码
$ git add .
$ git commit -m &#39;v1.0&#39;
$ git tag -a &quot;v1.0&quot; -m &quot;v1.0&quot;
$ git push -u origin master
$ git push -u origin --tags</code></pre></div></figure>

<p>5、web页面检查项目，确保上传成功</p>
<p><img src="/../../../img/image-20240711163804902.png" srcset="/img/loading.gif" lazyload alt="image-20240711163804902"></p>
<h2 id="4-2-配置jenkins"><a href="#4-2-配置jenkins" class="headerlink" title="4.2 配置jenkins"></a>4.2 配置jenkins</h2><blockquote>
<p>此操作在jenkins服务器配置</p>
</blockquote>
<h3 id="4-2-1-配置hosts解析"><a href="#4-2-1-配置hosts解析" class="headerlink" title="4.2.1 配置hosts解析"></a>4.2.1 配置hosts解析</h3><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># &#x2F;etc&#x2F;hosts
172.16.1.71 gitlab.test.cn
172.16.1.72 jk.test.cn</code></pre></div></figure>



<h3 id="4-2-2-添加任务"><a href="#4-2-2-添加任务" class="headerlink" title="4.2.2 添加任务"></a>4.2.2 添加任务</h3><p>创建任务</p>
<p><img src="/../../../img/image-20240711164141296.png" srcset="/img/loading.gif" lazyload alt="image-20240711164141296"></p>
<p>配置构建历史记录</p>
<p><img src="/../../../img/image-20240711164232384.png" srcset="/img/loading.gif" lazyload alt="image-20240711164232384"></p>
<h3 id="4-2-3-配置-源码管理"><a href="#4-2-3-配置-源码管理" class="headerlink" title="4.2.3 配置-源码管理"></a>4.2.3 配置-源码管理</h3><p>下面配置源码部分内容，通过git方式拉去代码</p>
<p>1、获取git仓库地址（从gitlab或gitee获取）  </p>
<p><img src="/../../../img/image-20240711164415115.png" srcset="/img/loading.gif" lazyload alt="image-20240711164415115"></p>
<p>2、在jenkins项目-源码管理中配置git地址</p>
<p><img src="/../../../img/image-20240711164557175.png" srcset="/img/loading.gif" lazyload alt="image-20240711164557175"></p>
<p>3、配置私钥凭证</p>
<p><img src="/../../../img/image-20240711164638257.png" srcset="/img/loading.gif" lazyload alt="image-20240711164638257"></p>
<p>4、选择SSH私钥认证</p>
<p><img src="/../../../img/image-20240711164700596.png" srcset="/img/loading.gif" lazyload alt="image-20240711164700596"></p>
<p>5、选择“Enter directly”</p>
<p><img src="/../../../img/image-20240711164800148.png" srcset="/img/loading.gif" lazyload alt="image-20240711164800148"></p>
<p>6、把window的私钥复制进去</p>
<p><img src="/../../../img/image-20240711164933353.png" srcset="/img/loading.gif" lazyload alt="image-20240711164933353"></p>
<p>7、认证方式选择刚创建的Jenkins</p>
<p><img src="/../../../img/image-20240711165255458.png" srcset="/img/loading.gif" lazyload alt="image-20240711165255458"></p>
<p>8、构建步骤，配置shell命令</p>
<p><img src="/../../../img/image-20240711165418871.png" srcset="/img/loading.gif" lazyload alt="image-20240711165418871"></p>
<p>填写shell命令，对拉取的代码做一定操作</p>
<p><img src="/../../../img/image-20240711165439642.png" srcset="/img/loading.gif" lazyload alt="image-20240711165439642"></p>
<h3 id="4-2-4-运行查看结果"><a href="#4-2-4-运行查看结果" class="headerlink" title="4.2.4 运行查看结果"></a>4.2.4 运行查看结果</h3><p>第一次运行，失败，查看控制台输出</p>
<p><img src="/../../../img/image-20240712152752448.png" srcset="/img/loading.gif" lazyload alt="image-20240712152752448"></p>
<p>提示我们“No ECDSA host key is known for gitlab.test.cn ”，按照蓝色字提示做如下配置：</p>
<p>首页 — 系统管理 — 全局安全配置 — Git Host Key Verification Configuration</p>
<p><img src="/../../../img/image-20240712152944584.png" srcset="/img/loading.gif" lazyload alt="image-20240712152944584"></p>
<p>保存后，再次构建，运行成功</p>
<p><img src="/../../../img/image-20240712152849438.png" srcset="/img/loading.gif" lazyload alt="image-20240712152849438"></p>
<h3 id="4-2-5-打包拉取到的代码"><a href="#4-2-5-打包拉取到的代码" class="headerlink" title="4.2.5 打包拉取到的代码"></a>4.2.5 打包拉取到的代码</h3><p>修改项目配置，对拉取的代码增加打包操作</p>
<p><img src="/../../../img/image-20240712153652948.png" srcset="/img/loading.gif" lazyload alt="image-20240712153652948"></p>
<p>检查执行结果，构建成功，&#x2F;tmp下成功生成文件</p>
<p><img src="/../../../img/image-20240712153746480.png" srcset="/img/loading.gif" lazyload alt="image-20240712153746480"></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">[root@devops02 &#x2F;]#ls &#x2F;tmp&#x2F;myproj.tar.gz 
&#x2F;tmp&#x2F;myproj.tar.gz</code></pre></div></figure>

<blockquote>
<p>后续可以在此处实现进一步的操作，比如把代码分发到web服务器并解压，实现代码部署</p>
</blockquote>
<h1 id="五、案例03-Jenkins从Gitlab拉取代码（基于tag标签）"><a href="#五、案例03-Jenkins从Gitlab拉取代码（基于tag标签）" class="headerlink" title="五、案例03-Jenkins从Gitlab拉取代码（基于tag标签）"></a>五、案例03-Jenkins从Gitlab拉取代码（基于tag标签）</h1><p>为什么要基于tag拉取代码？</p>
<ul>
<li>在案例02中，拉取的代码总是最新的，如果需要基于tag来拉取代码，该如何操作？</li>
</ul>
<h2 id="5-1-准备代码"><a href="#5-1-准备代码" class="headerlink" title="5.1 准备代码"></a>5.1 准备代码</h2><p>改修<code>index.html</code>文件的内容，打标签提交，创建v2.0和v3.0的标签</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># v2.0
echo &quot;&lt;title&gt;MyProj V2.0 Release&lt;&#x2F;tiltle&gt;&quot; &gt;&gt; index.html
git add .
git commit -m v2.0
git tag -a v2.0 -m v2.0
git push -u origin --all
git push -u origin --tags

# v3.0
echo &quot;&lt;title&gt;MyProj V3.0 Release&lt;&#x2F;tiltle&gt;&quot; &gt;&gt; index.html
git add .
git commit -m v3.0
git tag -a v3.0 -m v3.0
git push -u origin --all
git push -u origin --tags</code></pre></div></figure>

<p>检查</p>
<p><img src="/../../../img/image-20240712154851445.png" srcset="/img/loading.gif" lazyload alt="image-20240712154851445"></p>
<h2 id="5-2-jenkins安装获取tag的插件"><a href="#5-2-jenkins安装获取tag的插件" class="headerlink" title="5.2 jenkins安装获取tag的插件"></a>5.2 jenkins安装获取tag的插件</h2><p>插件名：git parameter</p>
<p><img src="/../../../img/image-20240712155103133.png" srcset="/img/loading.gif" lazyload alt="image-20240712155103133"></p>
<p>插件安装完，在“参数化构建过程”中会有新的选项</p>
<p><img src="/../../../img/image-20240712155155500.png" srcset="/img/loading.gif" lazyload alt="image-20240712155155500"></p>
<h2 id="5-4-创建jenkins任务"><a href="#5-4-创建jenkins任务" class="headerlink" title="5.4 创建jenkins任务"></a>5.4 创建jenkins任务</h2><p>1、创建自由风格项目</p>
<p><img src="/../../../img/image-20240712161314975.png" srcset="/img/loading.gif" lazyload alt="image-20240712161314975"></p>
<p>2、参数化构建过程—选Git参数</p>
<p><img src="/../../../img/image-20240712163249672.png" srcset="/img/loading.gif" lazyload alt="image-20240712163249672"></p>
<p>填写信息，创建<code>git_tag</code>变量，默认值origin，即master中的最新值</p>
<p><img src="/../../../img/image-20240712163503837.png" srcset="/img/loading.gif" lazyload alt="image-20240712163503837"></p>
<p>3、配置-源码管理</p>
<p>填写git项目信息</p>
<p><img src="/../../../img/image-20240712163726106.png" srcset="/img/loading.gif" lazyload alt="image-20240712163726106"></p>
<p>4、配置-每次构建之前清空工作目录，防止缓存导致问题</p>
<p><img src="/../../../img/image-20240712163815888.png" srcset="/img/loading.gif" lazyload alt="image-20240712163815888"></p>
<p>5、配置-Build步骤–执行Shell</p>
<p><img src="/../../../img/image-20240712163955122.png" srcset="/img/loading.gif" lazyload alt="image-20240712163955122"></p>
<h2 id="5-5-测试执行"><a href="#5-5-测试执行" class="headerlink" title="5.5 测试执行"></a>5.5 测试执行</h2><p>1、测试执行，在此处可以选择参数值，选择”v2.0”的tag</p>
<p><img src="/../../../img/image-20240712164059363.png" srcset="/img/loading.gif" lazyload alt="image-20240712164059363"></p>
<p>2、执行错误，可以看到<code>$&#123;git-tag&#125;</code>的标签名没有替换成值，有问题</p>
<p><img src="/../../../img/image-20240712165756849.png" srcset="/img/loading.gif" lazyload alt="image-20240712165756849"></p>
<p>3、解决方法：变量命名有问题，改成<code>git_tag</code>可以</p>
<p><img src="/../../../img/image-20240712165959106.png" srcset="/img/loading.gif" lazyload alt="image-20240712165959106"></p>
<p>分支也要记得改</p>
<p><img src="/../../../img/image-20240712170041378.png" srcset="/img/loading.gif" lazyload alt="image-20240712170041378"></p>
<p>shell也是<img src="/../../../img/image-20240712170255940.png" srcset="/img/loading.gif" lazyload alt="image-20240712170255940"></p>
<p>4、改完再次测试，成功，可以看到标签变量换成“v2.0”了</p>
<p><img src="/../../../img/image-20240712170412733.png" srcset="/img/loading.gif" lazyload alt="image-20240712170412733"></p>
<p>查看系统中的打包文件</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">[root@devops02 &#x2F;app&#x2F;rpms]#ls &#x2F;tmp&#x2F;myproj-v2.0.tar.gz 
&#x2F;tmp&#x2F;myproj-v2.0.tar.gz</code></pre></div></figure>



<h2 id="5-6-将代码部署到web节点"><a href="#5-6-将代码部署到web节点" class="headerlink" title="5.6 将代码部署到web节点"></a>5.6 将代码部署到web节点</h2><p>1、先在web01服务器，把nginx服务配置好</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">[root@web01 &#x2F;etc&#x2F;nginx&#x2F;conf.d]#cat myproj.conf 
server &#123;
  listen 8061;
  server_name myproj.test.cn;
  access_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;myproj.access.log main;
  error_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;myproj.error.log notice;
  root &#x2F;app&#x2F;code&#x2F;myproj;
  location &#x2F; &#123;
    index index.html;
  &#125;
&#125;</code></pre></div></figure>

<p>2、配置免密认证，jenkins连接web01不再需要输入密码</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">[root@devops02 &#x2F;app&#x2F;rpms]#ssh-keygen
[root@devops02 &#x2F;app&#x2F;rpms]#ssh-copy-id root@172.16.1.7
# 测试
[root@devops02 &#x2F;app&#x2F;rpms]#ssh root@172.16.1.7 hostname -I
10.0.0.7 172.16.1.7</code></pre></div></figure>

<p>3、jenkins配置，修改shell命令</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">echo &quot;您当前部署的代码版本为:$&#123;git_tag&#125;&quot;
#1. 打包压缩
tar zcf &#x2F;tmp&#x2F;myproj-$&#123;git_tag&#125;.tar.gz .
#2. 分发
scp &#x2F;tmp&#x2F;myproj-$&#123;git_tag&#125;.tar.gz root@172.16.1.7:&#x2F;tmp&#x2F;
#3. 解压
ssh root@172.16.1.7 &quot;tar xf &#x2F;tmp&#x2F;myproj-$&#123;git_tag&#125;.tar.gz -C &#x2F;app&#x2F;code&#x2F;myproj&#x2F;&quot;</code></pre></div></figure>

<p>3、检查部署结果</p>
<p>jenkins任务执行成功，</p>
<p><img src="/../../../img/image-20240712171555867.png" srcset="/img/loading.gif" lazyload alt="image-20240712171555867"></p>
<p>nginx页面部署成功，能正常访问</p>
<p><img src="/../../../img/image-20240712171619376.png" srcset="/img/loading.gif" lazyload alt="image-20240712171619376"></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%BF%90%E7%BB%B4/" class="category-chain-item">运维</a>
  
  
    <span>></span>
    
  <a href="/categories/%E8%BF%90%E7%BB%B4/%EF%BC%88%E4%BA%8C%EF%BC%89%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/" class="category-chain-item">（二）综合架构</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>day75-Devops-Jenkins(一)</div>
      <div>http://gsproj.github.io/2024/07/10/07_85期运维/03_自动化架构/day75-Devops-Jenkins-1/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>GongSheng</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年7月10日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/07/12/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day76-Devops-Jenkins-2/" title="day76-Devops-Jenkins(二)">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">day76-Devops-Jenkins(二)</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/07/10/06_%E6%9D%82%E8%AE%B0/hexo%E4%B8%8D%E8%83%BDctrlc%E7%9A%84%E9%97%AE%E9%A2%98/" title="Hexo Ctrl + C不能停止的问题">
                        <span class="hidden-mobile">Hexo Ctrl + C不能停止的问题</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script  src="https://lib.baomitu.com/prism/1.29.0/components/prism-core.min.js" ></script>

  <script  src="https://lib.baomitu.com/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js" ></script>

  <script  src="https://lib.baomitu.com/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js" ></script>

  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
