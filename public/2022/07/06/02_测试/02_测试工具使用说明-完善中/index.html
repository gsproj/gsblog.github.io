<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"gsproj.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="测试工具使用说明-汇总一、SPEC CPU 2017 测试1.1 概述​	标准性能评测机构（SPEC）开发的用于评测CPU性能的基准程序测试组，是一套CPU子系统测试工具。处理器、内存和编译都会影响最终的测试结果，目前SPEC CPU是业界首选的CPU评测工具。  1.2 工具安装获取镜像包： ​	cpu2017-1_0_5.iso 挂载IOS mount -o loop -t iso9660 c">
<meta property="og:type" content="article">
<meta property="og:title" content="测试工具使用说明-完善中">
<meta property="og:url" content="http://gsproj.github.io/2022/07/06/02_%E6%B5%8B%E8%AF%95/02_%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E-%E5%AE%8C%E5%96%84%E4%B8%AD/index.html">
<meta property="og:site_name" content="GongSheng Blog">
<meta property="og:description" content="测试工具使用说明-汇总一、SPEC CPU 2017 测试1.1 概述​	标准性能评测机构（SPEC）开发的用于评测CPU性能的基准程序测试组，是一套CPU子系统测试工具。处理器、内存和编译都会影响最终的测试结果，目前SPEC CPU是业界首选的CPU评测工具。  1.2 工具安装获取镜像包： ​	cpu2017-1_0_5.iso 挂载IOS mount -o loop -t iso9660 c">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="g:/工作/2020年3月/CN9性能测试/测试组合.png">
<meta property="article:published_time" content="2022-07-06T03:19:52.000Z">
<meta property="article:modified_time" content="2022-07-07T02:30:03.481Z">
<meta property="article:author" content="GongSheng">
<meta property="article:tag" content="工作">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="g:/工作/2020年3月/CN9性能测试/测试组合.png">

<link rel="canonical" href="http://gsproj.github.io/2022/07/06/02_%E6%B5%8B%E8%AF%95/02_%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E-%E5%AE%8C%E5%96%84%E4%B8%AD/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>测试工具使用说明-完善中 | GongSheng Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">GongSheng Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">山川異域，風月同天</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://gsproj.github.io/2022/07/06/02_%E6%B5%8B%E8%AF%95/02_%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E-%E5%AE%8C%E5%96%84%E4%B8%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/myavatar.png">
      <meta itemprop="name" content="GongSheng">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="GongSheng Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          测试工具使用说明-完善中
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-07-06 11:19:52" itemprop="dateCreated datePublished" datetime="2022-07-06T11:19:52+08:00">2022-07-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-07 10:30:03" itemprop="dateModified" datetime="2022-07-07T10:30:03+08:00">2022-07-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">测试</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%B5%8B%E8%AF%95/%E4%BF%A1%E5%88%9BPOC%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">信创POC测试</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="测试工具使用说明-汇总"><a href="#测试工具使用说明-汇总" class="headerlink" title="测试工具使用说明-汇总"></a>测试工具使用说明-汇总</h1><h1 id="一、SPEC-CPU-2017-测试"><a href="#一、SPEC-CPU-2017-测试" class="headerlink" title="一、SPEC CPU 2017 测试"></a>一、SPEC CPU 2017 测试</h1><h2 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1 概述"></a>1.1 概述</h2><p>​	标准性能评测机构（SPEC）开发的用于评测CPU性能的基准程序测试组，是一套CPU子系统测试工具。处理器、内存和编译都会影响最终的测试结果，目前SPEC CPU是业界首选的CPU评测工具。 </p>
<h2 id="1-2-工具安装"><a href="#1-2-工具安装" class="headerlink" title="1.2 工具安装"></a>1.2 工具安装</h2><p>获取镜像包：</p>
<p>​	cpu2017-1_0_5.iso</p>
<p>挂载IOS</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mount -o loop -t iso9660 cpu2017-1_0_5.iso &#x2F;xxx&#x2F;cpu2017CD<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>安装工具</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd &#x2F;xxx&#x2F;cpu2017CD
.&#x2F;install.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="1-3-测试步骤"><a href="#1-3-测试步骤" class="headerlink" title="1.3 测试步骤"></a>1.3 测试步骤</h2><p>spec2017主要分为四项测试：</p>
<ul>
<li>​	intrate</li>
<li>​	fprate</li>
<li>​	intspeed</li>
<li>​	fpspeed</li>
</ul>
<p>​	根据需要测试的cpu型号，可以到官网下载相应的cfg文件，修改icc、Jemalloc库、qkmalloc库的路径，放入config文件夹中。</p>
<p>测试命令如下：</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">source shrc
ulimit -s unlimited
# speed 测试
runcpu --config&#x3D;icc-speed-official.cfg --threads&#x3D;48 --define cores&#x3D;48 -n 3 -i ref fpspeed intspeed

# rate 测试
runcpu --config&#x3D;icc-rate-official.cfg -copies&#x3D;48 -n 3 -i ref intrate fprate

-----------------------------------------------------------------------

# 仅编译不跑测试
--action&#x3D;build
# 重新编译
--rebuild
# 绑核跑
taskset -c <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="1-4-测试优化"><a href="#1-4-测试优化" class="headerlink" title="1.4 测试优化"></a>1.4 测试优化</h2><blockquote>
<p>Bios设置：</p>
<p>​	开启超线程</p>
<p>​	 尝试开启LLC-PREFETCH</p>
</blockquote>
<h2 id="1-5-其他事项："><a href="#1-5-其他事项：" class="headerlink" title="1.5 其他事项："></a>1.5 其他事项：</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cfg文件中的submit可以设置绑核选项<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h1 id="二、SPEC-CPU-2006-测试"><a href="#二、SPEC-CPU-2006-测试" class="headerlink" title="二、SPEC CPU 2006 测试"></a>二、SPEC CPU 2006 测试</h1><h2 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h2><p>​	作用同Spec CPU 2017, 近年来逐渐被淘汰</p>
<h2 id="2-2-测试步骤"><a href="#2-2-测试步骤" class="headerlink" title="2.2 测试步骤"></a>2.2 测试步骤</h2><p>1、spec2006.tgz 解压，使用install.sh安装</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">SPEC CPU2006 Installation
Top of the CPU2006 tree is &#39;&#x2F;vol8&#x2F;tarball&#x2F;cpu2006&#39;
These appear to be valid toolsets:
ft-spec2006-tool
aarch64-linux
Enter the architecture you are using:
&gt;&gt; aarch64-linux<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">source shrc
# 单核测试
runspec -c linux64-arm64-gcc52.cfg -i ref -n 3 -I all 
# 多核测试（16）
runspec -c linux64-arm64-gcc52.cfg -r 16 -n 3 -i ref -I all<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="三、-SPEC-OMP-2012-测试"><a href="#三、-SPEC-OMP-2012-测试" class="headerlink" title="三、 SPEC OMP 2012 测试"></a>三、 SPEC OMP 2012 测试</h1><h2 id="3-1-概述"><a href="#3-1-概述" class="headerlink" title="3.1 概述"></a>3.1 概述</h2><p>​	基于SPEC测试套件的OpenMP评测工具，其中包含15个基于OpenMP的并行程序。</p>
<h2 id="3-2-工具安装"><a href="#3-2-工具安装" class="headerlink" title="3.2 工具安装"></a>3.2 工具安装</h2><p>​	获取源包：</p>
<p>​		omp2012-1.1.zip</p>
<p>​	解压后使用install.sh安装</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 安装
.&#x2F;install.sh -d &#x2F;home&#x2F;xx
# 仅编译
runspec --action&#x3D;build --config&#x3D;gcc.cfg -i ref -I all<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="3-3-测试步骤"><a href="#3-3-测试步骤" class="headerlink" title="3.3 测试步骤"></a>3.3 测试步骤</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">source shrc
ulimit -s unlimited
export OMP_NUM_THREADS&#x3D;48
runspec --config&#x3D;gcc.cfg --threads 48 -n 3 -i ref -I all<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="四、NPB-测试"><a href="#四、NPB-测试" class="headerlink" title="四、NPB 测试"></a>四、NPB 测试</h1><h2 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h2><p>​	NAS并行基准测试程序（NPB），是由美国航空航天局开发的一套代表流体动力学计算的应用程序集，它已经成为公认的用于测评大规模并行机和超级计算机的标准测试程序。NPB可用于常用的编程模型，如MPI和OpenMP。</p>
<h2 id="4-2-工具安装"><a href="#4-2-工具安装" class="headerlink" title="4.2 工具安装"></a>4.2 工具安装</h2><p>源包获取：</p>
<p>​	NPB3.4.tar.gz         OpenMP || MPICH</p>
<p>​	NPB3.4-MZ.tar.gz  OpenMP &amp;&amp; MPICH</p>
<p>解压即可。</p>
<h2 id="4-3-测试步骤"><a href="#4-3-测试步骤" class="headerlink" title="4.3 测试步骤"></a>4.3 测试步骤</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">make suite
cd bin
mpirun -np 4 .&#x2F;xxx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h1 id="五、Stream-测试"><a href="#五、Stream-测试" class="headerlink" title="五、Stream 测试"></a>五、Stream 测试</h1><h2 id="5-1-概述"><a href="#5-1-概述" class="headerlink" title="5.1 概述"></a>5.1 概述</h2><p>​	STREAM是一套综合性能测试程序集，通过fortran和C两种高级且高效的语言编写完成，由于这两种语言在数学计算方面的高效率， 使得 STREAM 测试例程可以充分发挥出内存的能力。Stream测试是内存测试中业界公认的内存带宽性能测试基准工具。</p>
<h2 id="5-2-工具安装"><a href="#5-2-工具安装" class="headerlink" title="5.2 工具安装"></a>5.2 工具安装</h2><p>源包获取：</p>
<p>​	stream.tgz  刘新娃修改过</p>
<p>​	<font color='red'>Intel平台请用ICC</font></p>
<p>解压后编译stream.c, 生成可执行文件</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">icc -O3 -fopenmp -DNTIMES&#x3D;10 -mcmodel&#x3D;large -o stream_c stream.c<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>没有修改过的怎么编译呢？</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">icc -mtune&#x3D;native -march&#x3D;native -O3 -mcmodel&#x3D;large -fopenmp -DSTREAM_ARRAY_SIZE&#x3D;100000000 -DNTIMES&#x3D;30 -DOFFSET&#x3D;512 stream.c -o stream-gs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="5-3-测试步骤"><a href="#5-3-测试步骤" class="headerlink" title="5.3 测试步骤"></a>5.3 测试步骤</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">export OMP_NUM_THREADS&#x3D;48&#x2F;32&#x2F;16&#x2F;8&#x2F;4  # 设置每个进程的线程数
.&#x2F;stream_c 200000 # 使用200G内存<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="5-4-其他事项"><a href="#5-4-其他事项" class="headerlink" title="5.4 其他事项"></a>5.4 其他事项</h2><blockquote>
<p><code>STREAM_ARRAY_SIZE</code>即<code>N</code>指定计算中a[],b[],c[]三个数组的大小，且数组的值采用了双精度（8个字节）。数组的维数 N定义时需要注意以下几点：</p>
<p>一、要充分考虑内存容量的需求，粗略估计是 N× 8（双精度浮点类型） × 3 （三个数组）&lt;&#x3D; 0.6*M；M 是用户的可用内存。</p>
<p>二、要保证测试过程中，使用到的内存容量要大于处理器内的缓存，只有这样才会有内存的操作，而不仅仅是对处理器内缓存的操作。</p>
<p>三、为了保证测试可以持续一段时间，测试过程中内存带宽可以达到一定的最大值， 从而避免得不到实际最大峰值的情况，如果四项测试中有完成时间小于20微秒的情况，就需要适当的增大测试数组的维度 N。</p>
</blockquote>
<h1 id="六、Linpack-测试"><a href="#六、Linpack-测试" class="headerlink" title="六、Linpack 测试"></a>六、Linpack 测试</h1><h2 id="6-1-概述"><a href="#6-1-概述" class="headerlink" title="6.1 概述"></a>6.1 概述</h2><p>​	Linpack是国际上使用最广泛的测试高性能计算机系统浮点性能的基准测试。通过对高性能计算机采用高斯消元法求解一元 N次稠密线性代数方程组的测试，评价高性能计算机的浮点计算性能。Linpack的结果按每秒浮点运算次数（flops）表示。</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">N ^ 2 * 8 &#x3D; 总内存<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="6-2-工具安装"><a href="#6-2-工具安装" class="headerlink" title="6.2 工具安装"></a>6.2 工具安装</h2><p>源包获取：</p>
<p>​	linpack.tgz</p>
<p>解压即可。</p>
<h2 id="6-3-测试步骤"><a href="#6-3-测试步骤" class="headerlink" title="6.3 测试步骤"></a>6.3 测试步骤</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 1进48线100G内存
.&#x2F;xhpl -n 1 -b 384 -p 1 -q 1 -m 100000
# 1进48线200G内存
.&#x2F;xhpl -n 1 -b 384 -p 1 -q 1 -m 200000
# 2进24线共100G内存
mpirun -n 2 .&#x2F;xhpl -b 384 -p 1 -q 2 -m 50000
# 2进24线共200G内存
mpirun -n 2 .&#x2F;xhpl -b 384 -p 1 -q 2 -m 100000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>用mpirun提交xhplrun.sh效果更好</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">PRO_SIZE&#x3D;$&#123;PMI_SIZE&#125;
threads&#x3D;&#96;echo $&#123;Cores&#125;&#x2F;$&#123;PMI_SIZE&#125; | bc&#96;
PMI_RANK_my&#x3D;$&#123;PMI_RANK&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h2 id="6-4-测试优化（重点）"><a href="#6-4-测试优化（重点）" class="headerlink" title="6.4 测试优化（重点）"></a>6.4 测试优化（重点）</h2><blockquote>
<p>一、计算理论内存总带宽</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&gt;计算方法：
&gt;查看内存带宽：
&gt;dmidecode | grep -A 16 &quot;Memory Device&quot;
&gt;例如内存信息为：
&gt;三星 DDR4 
&gt;16G 每根
&gt;2666 MT&#x2F;s（Mhz）
&gt;查看cpu支持的通道数，例如intel 6252N支持6通道，两个CPU支持12通道
&gt;理论带宽计算DDR4：
&gt;单条内存带宽 &#x3D; 内存核心频率 x 内存总线位数 x 倍增系数
 &#x3D; 2666 * 64 &#x2F; 8 &#x3D; 21328 MB&#x2F;s &#x3D; 21.3G&#x2F;s
&gt;12通道总内存带宽 &#x3D; 21328 * 12 &#x3D; 255936 &#x3D; 250G&#x2F;s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>二、使用stream测试实际内存总带宽</p>
<p>​	如果可以达到90%或以上，说明内存带宽正常, 继续Linpack测试</p>
<p>三、计算CPU理论峰值</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&gt;计算方法：
Mhz * 每个时钟周期执行浮点运算的次数 * CPU数目
&gt;&#x3D;
2.3 x ( 8 x 2 x 2 ) x 48 &#x3D; 3532.8 Gflops
&gt;说明：
峰值计算分为单精度和双精度浮点运算
&gt;单精度：
32bit的指令长度的运算，对应32位操作系统
&gt;双精度：
64bit的指令长度的运算，对应64位操作系统
&gt;查找CPU可以处理什么样的指令集：
例如Intel官网查到Intel Xeon 6252N
支持AVX-512，
# of AVX-512 FMA Units &#x3D; 2
(Fused Multiply Add instructions) 融合了 乘法 和 加法
即可以单个周期同时执行2条512bit的加法和2条512bit的乘法
&gt;理解上述两个概念，可以开始计算（CPU单周期浮点计算能力）
&gt;Intel 6252N (支持avx512，有512位)
&gt;单精度：
2.3 x 512&#x2F;32 x 2 x 2 &#x3D; 147.2Gflops 
&gt;双精度
2.3 x 512&#x2F;64 x 2 x 2 &#x3D; 73.6Gflops
&gt;双精度共48核
74.6 x 48 &#x3D; 3580

&gt;FT2000+ 和 FT1500A (只有128位)，FT3000加入sve指令集(128-256位)
&gt;单精度： 
2.2 x 128&#x2F;32 * 2 &#x3D; 4.4
&gt;双精度:
2.2 x 128&#x2F;64 * 2 &#x3D; 8.8
&gt;双精度共64核
8.8 x 64 &#x3D; 563.2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>四、使用Linapack测试CPU实际峰值</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&gt;如果性能达到理论峰值的70%说明正常，如果未达到尝试以下优化<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&gt;1、使用mpirun运行xhpl, 按&#96;lscpu&#96; 中的NUMA分组绑定,&#96;比如48核，分为两个Numa Node&#96;, 则用mpirun&#96;跑两个xhpl进程&#96;，每个进程使用 OMP_NUM_THREADS&#x3D;24, 跑24线程，这样可以将核用满。
&gt;在&#96;Intel&#96;平台，两个进程分别使用 HPL_HOST_CORE&#x3D;&#39;0-23&#39; 以及 HPL_HOST_CORE&#x3D;&#39;24-47&#39; 绑定核
&gt;在&#96;Arm64&#96;平台，则使用 GOMP_CPU_AFFINITY&#x3D;&#39;0-23&#39; 以及 GOMP_CPU_AFFINITY&#x3D;&#39;24-47&#39; 绑定
&gt;2、内存不用分配太大，根据stream测试结果分配，从小开始测
&gt;3、Intel平台编译器使用ICC，测试linpack使用icc自带的linpack，mpi使用icc自带的
&gt;4、Bios中关闭超线程，开启超频(turbo&#x2F;P-state)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><strong><font color="blue">先测stream,判断带宽是否正常，再测linpack，然后再测Spec Cpu</font></strong></p>
</blockquote>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># Intel平台可以使用的控制频率的命令
cpupower -c all frequency-set -g performance
cpupower -c 0-95 frequency-set -g userspace
cpupower -c 0-95 frequency-set -f 2700000

# 查看当前频率控制是否为perfomance？
cat &#x2F;sys&#x2F;devices&#x2F;system&#x2F;cpu&#x2F;cpu0&#x2F;cpufreq&#x2F;scaling_governor

# 跑xhpl之前设置指令集，或许有用
export MKL_ENABLE_INSTRUCTIONS&#x3D;AVX512<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="G:\工作\2020年3月\CN9性能测试\测试组合.png" alt="image-20200415171716940"></p>
<h2 id="6-5-HPL-dat修改"><a href="#6-5-HPL-dat修改" class="headerlink" title="6.5 HPL.dat修改"></a>6.5 HPL.dat修改</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 第1-2行，注释说明行
HPLinpack benchmark input file   
Innovative Computing Laboratory, University of Tennessee  

# 第 3-4 行，输出结果文件的形式
HPL.out      output file name (if any)  
6            device out (6&#x3D;stdout,7&#x3D;stderr,file) 

# 5-6行，求解矩阵的大小
1            # of problems sizes (N)  
1000         Ns   

# 7-8行 求解矩阵分块的大小
1            # of NBs
192 256      NBs

# 9行 处理器阵列的排列方式，行还是列
0：适用于节点较少，单个节点CPU较多的胖系统
1：适用于节点较多，单个节点CPU较少的瘦系统（机群上远好于按行排列）
1            PMAP process mapping (0&#x3D;Row-,1&#x3D;Column-major) 

# 10-12行 定义二维处理网格P&#x2F;Q
# P X Q &#x3D; 进程数，P尽量小于Q
# P&#x3D;2^n,P最好选择2的幂
1            # of process grids (P x Q) 
1 2          Ps
1 2          Qs

# 13行 设置阀值，不用修改
16.0         threshold

# 14-21行 设置L的分解方式
1            # of panel fact
2 1 0        PFACTs (0&#x3D;left, 1&#x3D;Crout, 2&#x3D;Right) # 对性能影响不大
1            # of recursive stopping criterium
4 8          NBMINs (&gt;&#x3D; 1)   # 4或8都不错
1            # of panels in recursion
2            NDIVs  # 选2比较理想
1            # of recursive panel fact.
1 0 2        RFACTs (0&#x3D;left, 1&#x3D;Crout, 2&#x3D;Right) # 对性能影响不大

# 22-23行 设置L的横向广播方式
# 前四种，适用于快速网络，后两种适用于速度较慢的网络
# 小规模系统，选择0&#x2F;1，大规模系统选择3
1            # of broadcast
0            BCASTs (0&#x3D;1rg,1&#x3D;1rM,2&#x3D;2rg,3&#x3D;2rM,4&#x3D;Lng,5&#x3D;LnM)

# 24-25行 设置横向通信的通信深度
# 小规模系统选择1&#x2F;2，大规模系统2-5之间
1            # of lookahead depth
1            DEPTHs (&gt;&#x3D;0)

# 26-27 设置U的广播算法
# 小规模系统，使用缺省值即可
0            SWAP (0&#x3D;bin-exch,1&#x3D;long,2&#x3D;mix)
1            swapping threshold

# 28-29行 L和U的数据存放格式
0：按列存放
1：按行存放
0            L1 in (0&#x3D;transposed,1&#x3D;no-transposed) form
0            U  in (0&#x3D;transposed,1&#x3D;no-transposed) form

# 30-31 缺省值即可
0            Equilibration (0&#x3D;no,1&#x3D;yes)
8            memory alignment in double (&gt; 0)
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="6-6-测试脚本编写"><a href="#6-6-测试脚本编写" class="headerlink" title="6.6 测试脚本编写"></a>6.6 测试脚本编写</h2><h3 id="6-6-1-本地mpirun测试脚本（Intel版本）"><a href="#6-6-1-本地mpirun测试脚本（Intel版本）" class="headerlink" title="6.6.1 本地mpirun测试脚本（Intel版本）"></a>6.6.1 本地mpirun测试脚本（Intel版本）</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 本地单节点测试，需要根据&#96;lscpu&#96;中numa分区情况(node)的使用mpirun测试xhpl
# eg:在未开超线程的情况下，分为两个node，每个node中有12个核，则最佳测试方法为mpirun -np 2 .&#x2F;myrun.sh
# 以下为myrun.sh的具体实现

#!&#x2F;bin&#x2F;bash
ulimit -s unlimited
Cores&#x3D;48
ThreadsNum&#x3D;&#96;echo &quot;$&#123;Cores&#125;&#x2F;$&#123;PMI_SIZE&#125;&quot; | bc&#96; # 计算每个进程跑的线程数
case $&#123;PMI_SIZE&#125; in
2)
        case $&#123;PMI_RANK&#125; in
        0)
        export OMP_NUM_THREADS&#x3D;$&#123;ThreadsNum&#125;
        export HPL_HOST_CORE&#x3D;&#39;0-23&#39;
        .&#x2F;xhpl -n 1 -b 384 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
        ;;
        1)
        export OMP_NUM_THREADS&#x3D;$&#123;ThreadsNum&#125;
        export HPL_HOST_CORE&#x3D;&#39;24-47&#39;
        .&#x2F;xhpl -n 1 -b 384 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
        ;;
        esac
;;
esac
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="6-6-2-Slurm-srun测试脚本-FT版本"><a href="#6-6-2-Slurm-srun测试脚本-FT版本" class="headerlink" title="6.6.2 Slurm srun测试脚本(FT版本)"></a>6.6.2 Slurm srun测试脚本(FT版本)</h2><p>xhplrun.sh</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#!&#x2F;bin&#x2F;bash
ulimit -s unlimited
Cores&#x3D;48


&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
PMI_SIZE&#x3D;$SLURM_NPROCS
PMI_RANK&#x3D;$SLURM_PROCID
MPI_NUM_NODE&#x3D;$SLURM_NNODES
MPI_PER_NODE&#x3D;$((PMI_SIZE &#x2F; MPI_NUM_NODES))
MPI_RANK_FOR_NODE&#x3D;$((PMI_RANK % MPI_PER_NODE))

PRO_SIZE&#x3D;$&#123;MPI_PER_NODE&#125;
PMI_RANK_my&#x3D;$&#123;MPI_RANK_FOR_NODE&#125;
&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;

echo $&#123;PRO_SIZE&#125; $&#123;PMI_RANK_my&#125; $&#123;threads&#125; $&#123;PMI_SIZE&#125; $&#123;PMI_RANK&#125; $&#123;MPI_NUM_NODES&#125; $&#123;MPI_PER_NODE&#125; $&#123;MPI_RANK_FOR_NODE&#125;

export HPL_CMDLINE&#x3D;1
case $&#123;PRO_SIZE&#125; in
1)
#numactl -i 0-1 -N 0-1 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 0,4 -N 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;0-63&#39;
numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#.&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
2)
case $&#123;PMI_RANK_my&#125; in
0)
#numactl -i 0-3 -N 0-3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -m 3 -N 0-3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;0-31&#39;
numactl -i 4-7 -N 0-3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
1)
#numactl -i 4-7 -N 4-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -m 7 -N 4-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;32-63&#39;
numactl -i 0-3 -N 4-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
esac
#mpirun -n 1 numactl -i 0-3 -N 0-3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125; : -n 1 numactl -i 4-7 -N 4-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
esac<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>yhrun 提交作业 runpro.sh</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#duqi

if [ $# -ne 5 ]
then
        echo Usage: .&#x2F;runpro.sh nodes_list nodes_num proc_per_node mem_per_proc logdir
        exit 0
fi

export HPL_CMDLINE&#x3D;1

export LD_LIBRARY_PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;mpi3&#x2F;lib:$LD_LIBRARY_PATH

nodes&#x3D;$&#123;1&#125;
nnodes&#x3D;$&#123;2&#125;
nprocs&#x3D;$&#123;3&#125;
nmem&#x3D;$&#123;4&#125;
logdir&#x3D;$&#123;5&#125;


mkdir -p $&#123;logdir&#125;

tnprocs&#x3D;$(($&#123;nnodes&#125;*$&#123;nprocs&#125;))
P&#x3D;1
Q&#x3D;1
for i in &#96;seq 1 $&#123;tnprocs&#125;&#96;
do
        for j in &#96;seq 1 $&#123;tnprocs&#125;&#96;
        do
                PQ&#x3D;$(($&#123;i&#125;*$&#123;j&#125;))
                if [ $&#123;PQ&#125; -eq $&#123;tnprocs&#125; ] &amp;&amp; [ $&#123;i&#125; -le $&#123;j&#125; ]
                then
                        P&#x3D;$&#123;i&#125;
                        Q&#x3D;$&#123;j&#125;
                fi
        done
done

for i in &#96;yhcontrol show hostname $&#123;nodes&#125;&#96;
do
        scp HPL.dat $i:&#x2F;root&#x2F;linpack &amp;
done
wait
sleep 1

j&#x3D;0
runnodes&#x3D;&#39;&#39;

for i in &#96;yhcontrol show hostname $&#123;nodes&#125;&#96;
do
        runnodes+&#x3D;$&#123;i&#125;,
        let j++
        if [ $&#123;j&#125; -eq $&#123;nnodes&#125; ]
        then
                echo &quot;yhrun -p all -N $&#123;nnodes&#125; -n $&#123;tnprocs&#125; -w $&#123;runnodes&#125; -D &#x2F;root&#x2F;linpack &#x2F;root&#x2F;linpack&#x2F;xhplrun.sh $&#123;P&#125; $&#123;Q&#125; $&#123;nmem&#125; &amp;&gt;&gt; $&#123;logdir&#125;&#x2F;$&#123;i&#125;.log &amp;&quot;
                echo $&#123;runnodes&#125; &amp;&gt;&gt; $&#123;logdir&#125;&#x2F;$&#123;i&#125;.log
                yhrun -p all -N $&#123;nnodes&#125; -n $&#123;tnprocs&#125; -w $&#123;runnodes&#125; -D &#x2F;root&#x2F;linpack &#x2F;root&#x2F;linpack&#x2F;xhplrun.sh $&#123;P&#125; $&#123;Q&#125; $&#123;nmem&#125; &amp;&gt;&gt; $&#123;logdir&#125;&#x2F;$&#123;i&#125;.log &amp;
                j&#x3D;0
                runnodes&#x3D;&#39;&#39;
        fi
done<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="6-7-Bios设置"><a href="#6-7-Bios设置" class="headerlink" title="6.7 Bios设置"></a>6.7 Bios设置</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">琦哥的：
    UPI Configuration
        Link Lop -&gt; disable
        Link L1  -&gt; disable 
        IO Directory Cache -&gt; enable
        Isoc Mode -&gt; enable

    Memory Configuration
        Eufsrce POR -&gt; enable
        PPR Type -&gt; Soft PPR
        Memory Frequency -&gt; 2666
        Data Scrambling for NVMDIMM -&gt; enable
        Data Scrambling for DDR4 -&gt; enable
        Enable AOR -&gt; enable
        Refresh Option -&gt; enable
        Memory RAS
            Memory Rank Sparing -&gt; enable

    IIO Configuration
        PCI-E Port Max Payload Size -&gt; 256B

    CPU P-State
        SpeedStep -&gt; disable&#x2F;enable?
        PBF 
        Hardware P-State -&gt; enable
        Package c state -&gt; No limit 
	
网上找的系统Bios设置优化
    关闭超线程
    打开EIST
    打开Turbo Mode
    Boot Performance mode设置为max performance
    Energy Performance BIAS设置为Performance
    打开Monitor&#x2F;Mwait
    Package C stat limit设置为C0&#x2F;C1 state
    关闭CPU C3 report
    关闭CPU C6 report
    关闭Enhanced Halt State
    关闭Intel VT for Directed I&#x2F;O
    Linux OS下CPU Power Management设置为max performance
    QPI及Memory Frequency保持为Max Frequency
    关闭NUMA功能 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="6-8-结果反馈"><a href="#6-8-结果反馈" class="headerlink" title="6.8 结果反馈"></a>6.8 <span id="jump">结果反馈</span></h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#linpack测试以我们为主导

1、grep FAILED 关键字,查看是否有节点计算错误
2、grep WR 查看节点性能是否正常
3、统计跑死的点

# 如何反馈？
一轮Linpack40分钟测试完成
	一、6个点本是drain*状态
	二、3个点跑死，cn[1,2,3]
	三、5个点Linpack计算FAILED
	四、其他点linpakc性能正常
可以考虑更换下一批<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="6-9-风冷系统linpack测试全过程记录"><a href="#6-9-风冷系统linpack测试全过程记录" class="headerlink" title="6.9 风冷系统linpack测试全过程记录"></a>6.9 风冷系统linpack测试全过程记录</h2><blockquote>
<h5 id="1、了解风冷系统的架构"><a href="#1、了解风冷系统的架构" class="headerlink" title="1、了解风冷系统的架构"></a>1、了解风冷系统的架构</h5><p>按批次测试，测完一批换下一批</p>
<p>一批为192个节点，每个框32个节点，共6个框</p>
<p>每个节点128G内存，芯片为FT2000+, 通过mhz获取频率为2000（降频），64物理核</p>
<p>系统版本： 4.19.46-cn+</p>
<h5 id="2、计算每个节点的理论峰值"><a href="#2、计算每个节点的理论峰值" class="headerlink" title="2、计算每个节点的理论峰值"></a>2、计算每个节点的理论峰值</h5><p>2000 * 128 &#x2F; 64 * 2 * 64&#x3D; 512000</p>
<h5 id="3、开始测试"><a href="#3、开始测试" class="headerlink" title="3、开始测试"></a>3、开始测试</h5><p>runpro.sh脚本参数说明:</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&gt;.&#x2F;runpro.sh NodeList NodeBind ProcessesPerNode MemSize
&gt;NodeList 节点列表,例如cn[0-8]
&gt;NodeBind 几个节点绑定运行，例如2，则计算效率时，需要将结果得到的效率&#x2F;2&#x2F;512
&gt;ProcessesPerNode 每给节点运行几个xhpl进程，根据numa node来，FT一般是8
&gt;MemSize 每个节点中，每个进程分配的内存，一般使用到约总内存的80%，例如单节点128G，填写12000（单位为Mb），则总使用96G内存<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>单节点测试：</p>
<p>​	不需要互联测试网络联通性，仅对单节点进行压力测试</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&gt;.&#x2F;runpro.sh cn0 1 8 12000 logdir<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>多节点测试：</p>
<p>​	需要互联测试网络联通性， 2，4， 8， 16， 32， 64， 128，如果要求测多节点稳定性，测试的8点8进8线，结果按<a href="#jump">章节6.8</a>反馈</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&gt;.&#x2F;runpro.sh cn0 1 8 12000 logdir<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>问题解决一：</p>
<p>​	测试到128节点，性能异常，效率仅有43%</p>
<p>互联那边回应：</p>
<p>​	节点数超过64，通信就跨框</p>
<p>琦哥建议的做法：</p>
<p>​	把128个节点分到4个框，测试一下，看是不是带宽的原因</p>
<p>最后的解决方法：</p>
<p>​	网络拓扑更换，矩阵值不能相等，使用原本32 x 32，改为16 x 64，但是换成160节点后还是有问题</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&gt;.&#x2F;runpro.sh cn[xx-xx] 128 8 12000 dir
&gt;其中执行的xhplrun.sh的参数为
&gt;xhplrun.sh 32 32 12000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>


</blockquote>
<h1 id="七、Lmbench-测试"><a href="#七、Lmbench-测试" class="headerlink" title="七、Lmbench 测试"></a>七、Lmbench 测试</h1><h2 id="7-1-概述"><a href="#7-1-概述" class="headerlink" title="7.1 概述"></a>7.1 概述</h2><p>​	Lmbench是一套简易，可移植的，符合ANSI&#x2F;C标准为UNIX&#x2F;POSIX而制定的微型测评工具。一般来说，它衡量两个关键特征：反应时间和带宽。LmBench旨在使系统开发者深入了解关键操作的基础成本。</p>
<h2 id="7-2-工具安装"><a href="#7-2-工具安装" class="headerlink" title="7.2 工具安装"></a>7.2 工具安装</h2><p>获取源包：</p>
<p>​	lmbench3.tar.gz</p>
<p>gcc编译安装</p>
<h2 id="7-3-测试步骤"><a href="#7-3-测试步骤" class="headerlink" title="7.3 测试步骤"></a>7.3 测试步骤</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cd src
make results
make see
内存10G。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">错误处理：
[root@cn9 lmbench3]# cd src&#x2F;
[root@cn9 src]# make results
gmake[1]: Entering directory &#96;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;lmbench3&#x2F;src&#39;
gmake[1]: *** No rule to make target &#96;..&#x2F;SCCS&#x2F;s.ChangeSet&#39;, needed by &#96;bk.ver&#39;.  Stop.
gmake[1]: Leaving directory &#96;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;lmbench3&#x2F;src&#39;
解决方法：
	vim Makefile
	231行修改：
	$O&#x2F;lmbench : ..&#x2F;scripts&#x2F;lmbench bk.ver
	改为
	$O&#x2F;lmbench : ..&#x2F;scripts&#x2F;lmbench<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="八、IOR-测试（暂无）"><a href="#八、IOR-测试（暂无）" class="headerlink" title="八、IOR 测试（暂无）"></a>八、IOR 测试（暂无）</h1><h1 id="九、alltoall测试"><a href="#九、alltoall测试" class="headerlink" title="九、alltoall测试"></a>九、alltoall测试</h1><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">yhrun -n 128 -N 8 -w cn34,cn35,cn36,cn37,cn38,cn39,cn40,cn41, &#x2F;root&#x2F;xm_alltoall 102400 1000<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h1 id="附录：常用工具链编译方法"><a href="#附录：常用工具链编译方法" class="headerlink" title="附录：常用工具链编译方法"></a>附录：常用工具链编译方法</h1><h2 id="一、GCC编译"><a href="#一、GCC编译" class="headerlink" title="一、GCC编译"></a>一、GCC编译</h2><p>需要依次编译依赖软件，然后在编译gcc中使用</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 设置isl的库路径
export LD_LIBRARY_PATH&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830&#x2F;lib:$LD_LIBRARY_PATH
# 编译GCC
..&#x2F;configure --prefix&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830 --enable-lto --disable-bootstrap --enable-languages&#x3D;c,c++,fortran --with-gmp&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830 --with-mpfr&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830 --with-mpc&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830 --with-isl&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="1-1-依赖软件编译"><a href="#1-1-依赖软件编译" class="headerlink" title="1.1 依赖软件编译"></a>1.1 依赖软件编译</h3><h4 id="1-1-2-编译安装gmp"><a href="#1-1-2-编译安装gmp" class="headerlink" title="1.1.2 编译安装gmp"></a>1.1.2 编译安装gmp</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">.&#x2F;configure --prefix&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830
make 
make install

.&#x2F;configure --with-gmp&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc83 --with-mpfr&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc83  --prefix&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc83<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="1-1-3-编译安装mpfr"><a href="#1-1-3-编译安装mpfr" class="headerlink" title="1.1.3 编译安装mpfr"></a>1.1.3 编译安装mpfr</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">.&#x2F;configure --prefix&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830 --with-gmp&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830
make 
make install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h4 id="1-1-4-编译安装mpc"><a href="#1-1-4-编译安装mpc" class="headerlink" title="1.1.4 编译安装mpc"></a>1.1.4 编译安装mpc</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">.&#x2F;configure --prefix&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830 --with-gmp&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830 --with-mpfr&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830
make
make install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<h4 id="1-1-5-编译安装isl"><a href="#1-1-5-编译安装isl" class="headerlink" title="1.1.5 编译安装isl"></a>1.1.5 编译安装isl</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">.&#x2F;configure --prefix&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830 --with-gmp-prefix&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"> yum install gcc-* gtk2 gtk3 x11 libX11.x86_64 libX11-devel.x86_64 libXorg libXss libXScrnSaver.x86_64 xorg-x11-server-Xorg.x86_64 xulrunner.x86_64 xulrunner.i686 libstdc++.i686 libstdc++-devel.i686
glibc.i686 glibc-devel.i686 libgcc* xulrunner.x86_64 xulrunner.i686 glibc-devel.x86_64 glibc.x86_64 autoconf-archive.noarch gtk2 gtk3 pango libXScrnSaver libX11.x86_64 libX11-devel.x86_64 libX11-common.noarch libxkbcommon-x11.x86_64 xorg-x11-server-common.x86_64 libstdc++* -y<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#!&#x2F;bin&#x2F;bash
mount -o loop -t iso9660 &#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;images&#x2F;rhel-server-7.6-x86_64-dvd.iso &#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;mnt&#x2F;CDROM


yum install gcc-* gtk2 gtk3 glibc-devel.i686 x11 libX11.x86_64 libX11-devel.x86_64 libXorg libXss libXScrnSaver.x86_64 xorg-x11-server-Xorg.x86_64 xulrunner.x86_64 xulrunner.i686 libstdc++.i686 libstdc++-devel.i686 glibc* libgcc* xulrunner* autoconf-archive.noarch gtk2 gtk3 pango libXScrnSaver libX11.x86_64 libX11-devel.x86_64 libX11-common.noarch libxkbcommon-x11.x86_64 xorg-x11-server-common.x86_64 libstdc++* -y
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="二、MPICH3编译"><a href="#二、MPICH3编译" class="headerlink" title="二、MPICH3编译"></a>二、MPICH3编译</h2><p>设置gcc830的环境变量</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">export PATH&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830&#x2F;bin:$PATH
export LD_LIBRARY_PATH&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830&#x2F;lib:$LD_LIBRARY_PATH
export LD_INCLUDE_PATH&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830&#x2F;include:$LD_INCLUDE_PATH
export CPATH&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830&#x2F;include:$CPATH
export LD_LIBRARY_PATH&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830&#x2F;lib64:$LD_LIBRARY_PATH
export LD_LIBRARY_PATH&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;gcc830&#x2F;libexec:$LD_LIBRARY_PATH<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>再编译</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">.&#x2F;configure --prefix&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;mpi3-gcc830 --enable-fast --enable-shared&#x3D;yes --enable-threads&#x3D;runtime --with-ch3-rank-bits&#x3D;32 --enable-romio --with-file-system&#x3D;ufs+nfs --with-mpe
make 
make install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>设置环境变量使用</p>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">export PATH&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;mpi3-gcc830&#x2F;bin:$PATH
export LD_LIBRARY_PATH&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;mpi3-gcc830&#x2F;lib:$LD_LIBRARY_PATH
export LD_INCLUDE_PATH&#x3D;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;tools&#x2F;mpi3-gcc830&#x2F;include:$LD_INCLUDE_PATH<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>



<h3 id="三、Redhat设置本地镜像源"><a href="#三、Redhat设置本地镜像源" class="headerlink" title="三、Redhat设置本地镜像源"></a>三、Redhat设置本地镜像源</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">mount -o loop -t iso9660 &#x2F;home&#x2F;IOSYS&#x2F;test652&#x2F;images&#x2F;rhel-server-7.6-x86_64-dvd.iso &#x2F;home&#x2F;IOSYS&#x2F;test652&#x2F;mnt&#x2F;CDROM<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">vim &#x2F;etc&#x2F;yum.repos.d&#x2F;redhat.repo

[rhel7.6]
name&#x3D;rhel7.6
baseurl&#x3D;file:&#x2F;&#x2F;&#x2F;home&#x2F;testcpu&#x2F;test652&#x2F;mnt&#x2F;CDROM
enabled&#x3D;1
gpgcheck&#x3D;0
priority&#x3D;1

yum clean
yum update
yum repolist<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="四、找不到so库的解决方法"><a href="#四、找不到so库的解决方法" class="headerlink" title="四、找不到so库的解决方法"></a>四、找不到so库的解决方法</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 方法一：
	设置LD_LIBRARY_PATH
# 方法二：
 	vim &#x2F;etc&#x2F;ld.so.conf
 	----------------------------------------------------
 	include ld.so.conf.d&#x2F;*.conf
	&#x2F;opt&#x2F;intel&#x2F;compilers_and_libraries&#x2F;linux&#x2F;lib&#x2F;intel64
	ldconfig 更新<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="五、复制以及查看端口占用"><a href="#五、复制以及查看端口占用" class="headerlink" title="五、复制以及查看端口占用"></a>五、复制以及查看端口占用</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 查看端口占用
netstat -nultp | grep 8080
netstat -anp  | grep 80
netstat -ano | grep 18130
lsof -i:18130

# 复制
rsync -chavP &#x2F;var&#x2F;opt&#x2F;gitlab&#x2F;postgresql .
rsync -avzP 复制显示进度

# 查看Bios版本
dmidecode<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">
mpiicc -DAdd__ -DF77_INTEGER&#x3D;int -DStringSunStyle -DHPL_DETAILED_TIMING -DHPL_PROGRESS_REPORT -I&#x2F;root&#x2F;hpl&#x2F;include -I&#x2F;root&#x2F;hpl&#x2F;include&#x2F;Linux_Intel64 -I&#x2F;opt&#x2F;intel&#x2F;compilers_and_libraries_2019.4.243&#x2F;linux&#x2F;mkl&#x2F;mkl&#x2F;include  -O3 -w -ansi-alias -i-static -z noexecstack -z relro -z now -nocompchk -Wall -qopenmp -mt_mpi -o &#x2F;root&#x2F;hpl&#x2F;bin&#x2F;Linux_Intel64&#x2F;xhpl HPL_pddriver.o         HPL_pdinfo.o           HPL_pdtest.o &#x2F;root&#x2F;hpl&#x2F;lib&#x2F;Linux_Intel64&#x2F;libhpl.a  -L&#x2F;opt&#x2F;intel&#x2F;compilers_and_libraries_2019.4.243&#x2F;linux&#x2F;mkl&#x2F;mkl&#x2F;lib&#x2F;intel64 -Wl,--start-group &#x2F;opt&#x2F;intel&#x2F;compilers_and_libraries_2019.4.243&#x2F;linux&#x2F;mkl&#x2F;lib&#x2F;intel64&#x2F;libmkl_intel_lp64.a &#x2F;opt&#x2F;intel&#x2F;compilers_and_libraries_2019.4.243&#x2F;linux&#x2F;mkl&#x2F;lib&#x2F;intel64&#x2F;libmkl_intel_thread.a &#x2F;opt&#x2F;intel&#x2F;compilers_and_libraries_2019.4.243&#x2F;linux&#x2F;mkl&#x2F;lib&#x2F;intel64&#x2F;libmkl_core.a -Wl,--end-group -lpthread -ldl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="六、查看cpu主频率-和-内存信息"><a href="#六、查看cpu主频率-和-内存信息" class="headerlink" title="六、查看cpu主频率 和 内存信息"></a>六、查看cpu主频率 和 内存信息</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 查看CPU信息
lscpu 其中 sockets个数代表物理核个数
cat &#x2F;proc&#x2F;cpuinfo
lmbench的mhz
&#x2F;usr&#x2F;bin&#x2F;turbostat

# 查看内存信息
cat &#x2F;proc&#x2F;meminfo
dmidecode | grep -A 16 &quot;Memory Device&quot;、<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="七、GLSL-1-50-is-not-supported"><a href="#七、GLSL-1-50-is-not-supported" class="headerlink" title="七、GLSL 1.50 is not supported"></a>七、GLSL 1.50 is not supported</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># 报错：
ERROR: In &#x2F;home&#x2F;gs&#x2F;src&#x2F;VTK8.2&#x2F;VTK-8.2.0&#x2F;Rendering&#x2F;OpenGL2&#x2F;vtkShaderProgram.cxx, line 447
vtkShaderProgram (0x2b87270): 0:1(10): error: GLSL 1.50 is not supported. Supported versions are: 1.10, 1.20, 1.30, 1.00 ES, and 3.00 ES

# 解决方法
export MESA_GL_VERSION_OVERRIDE&#x3D;3.2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">cn[16-19,24-27,144-147,152-155]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="八、附录"><a href="#八、附录" class="headerlink" title="八、附录"></a>八、附录</h2><h3 id="8-1-Linpack脚本"><a href="#8-1-Linpack脚本" class="headerlink" title="8.1 Linpack脚本"></a>8.1 Linpack脚本</h3><blockquote>
<p>runpro.sh</p>
<p>.&#x2F;runpro.sh nodes_list nodes_num proc_per_node mem_per_proc logdir</p>
<p>node_list 节点列表</p>
<p>nodes_num 几个点连在一起跑，单点 双点 多点</p>
<p> proc_per_node 每个节点跑几个进程，看node分为几个，FT一般是8</p>
<p> mem 12000 每个进程分配的内存，*8 大概&#x3D; 总内存的80%</p>
<p> logdir 日志文件</p>
<p> 单点8进程，一轮≈35分钟</p>
</blockquote>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#! &#x2F;bin&#x2F;bash

#duqi

if [ $# -ne 5 ]
then
        echo Usage: .&#x2F;runpro.sh nodes_list nodes_num proc_per_node mem_per_proc logdir
        exit 0
fi

export HPL_CMDLINE&#x3D;1
export LD_LIBRARY_PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;mpi3&#x2F;lib:LD_LIBRARY_PATH

nodes&#x3D;$&#123;1&#125;
nnodes&#x3D;$&#123;2&#125;
nprocs&#x3D;$&#123;3&#125;
nmem&#x3D;$&#123;4&#125;
logdir&#x3D;$&#123;5&#125;


mkdir -p $&#123;logdir&#125;

tnprocs&#x3D;$(($&#123;nnodes&#125;*$&#123;nprocs&#125;))
P&#x3D;1
Q&#x3D;1


num_max&#x3D;1
for i in &#96;seq 1 $&#123;tnprocs&#125;&#96;
do
        j&#x3D;$(($&#123;i&#125;*$&#123;i&#125;))
        if [ $&#123;tnprocs&#125; -le $&#123;j&#125; ]; then
                num_max&#x3D;$&#123;i&#125;
                break
        fi
done
for i in &#96;seq 1 $&#123;num_max&#125;&#96;
do
        for j in &#96;seq $&#123;num_max&#125; $&#123;tnprocs&#125;&#96;
        do
                PQ&#x3D;$(($&#123;i&#125;*$&#123;j&#125;))
                if [ $&#123;PQ&#125; -eq $&#123;tnprocs&#125; ]
                then
                        P&#x3D;$&#123;i&#125;
                        Q&#x3D;$&#123;j&#125;
                fi
        done
done


for i in &#96;yhcontrol show hostname $&#123;nodes&#125;&#96;
do
        scp HPL.dat $i:&#x2F;root&#x2F;linpack &amp;
done
sleep 1

j&#x3D;0
runnodes&#x3D;&#39;&#39;

for i in &#96;yhcontrol show hostname $&#123;nodes&#125;&#96;
do
        runnodes+&#x3D;$&#123;i&#125;,
        let j++
        if [ $&#123;j&#125; -eq $&#123;nnodes&#125; ]
        then
                echo &quot;yhrun -p All -N $&#123;nnodes&#125; -n $&#123;tnprocs&#125; -w $&#123;runnodes&#125; -D &#x2F;root&#x2F;linpack &#x2F;root&#x2F;linpack&#x2F;xhplrun.sh $&#123;P&#125; $&#123;Q&#125; $&#123;nmem&#125; &amp;&gt;&gt; $&#123;logdir&#125;&#x2F;$&#123;i&#125;.log &amp;&quot;
                echo $&#123;runnodes&#125; &amp;&gt;&gt; $&#123;logdir&#125;&#x2F;$&#123;i&#125;.log &amp;
                echo &quot;yhrun -p All -N $&#123;nnodes&#125; -n $&#123;tnprocs&#125; -w $&#123;runnodes&#125; -D &#x2F;root&#x2F;linpack &#x2F;root&#x2F;linpack&#x2F;xhplrun.sh $&#123;P&#125; $&#123;Q&#125; $&#123;nmem&#125;&quot; &amp;&gt;&gt; $&#123;logdir&#125;&#x2F;list.log
                yhrun -p All -N $&#123;nnodes&#125; -n $&#123;tnprocs&#125; -w $&#123;runnodes&#125; -D &#x2F;root&#x2F;linpack &#x2F;root&#x2F;linpack&#x2F;xhplrun.sh $&#123;P&#125; $&#123;Q&#125; $&#123;nmem&#125; &amp;&gt;&gt; $&#123;logdir&#125;&#x2F;$&#123;i&#125;.log &amp;
                j&#x3D;0
                runnodes&#x3D;&#39;&#39;
        fi
done
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>xhplrun.sh</p>
</blockquote>
<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#! &#x2F;bin&#x2F;bash

#duqi

ulimit -s unlimited

Cores&#x3D;64
#&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
PMI_SIZE&#x3D;$SLURM_NPROCS

PMI_RANK&#x3D;$SLURM_PROCID

MPI_NUM_NODES&#x3D;$SLURM_NNODES

MPI_PER_NODE&#x3D;$((PMI_SIZE &#x2F; MPI_NUM_NODES))

MPI_RANK_FOR_NODE&#x3D;$((PMI_RANK % MPI_PER_NODE))
#&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;


threads&#x3D;&#96;echo $&#123;Cores&#125;*$&#123;SLURM_NNODES&#125;&#x2F;$&#123;PMI_SIZE&#125; | bc&#96;

PRO_SIZE&#x3D;$&#123;MPI_PER_NODE&#125;
PMI_RANK_my&#x3D;$&#123;MPI_RANK_FOR_NODE&#125;

echo $&#123;PRO_SIZE&#125; $&#123;PMI_RANK_my&#125; $&#123;threads&#125; $&#123;PMI_SIZE&#125; $&#123;PMI_RANK&#125; $&#123;MPI_NUM_NODES&#125; $&#123;MPI_PER_NODE&#125; $&#123;MPI_RANK_FOR_NODE&#125;

export HPL_CMDLINE&#x3D;1
case $&#123;PRO_SIZE&#125; in
1)
#numactl -i 0-1 -N 0-1 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 0,4 -N 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;0-63&#39;
numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#.&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
2)
case $&#123;PMI_RANK_my&#125; in
0)
#numactl -i 0-3 -N 0-3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -m 3 -N 0-3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;0-31&#39;
numactl -i 4-7 -N 0-3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
1)
#numactl -i 4-7 -N 4-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -m 7 -N 4-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;32-63&#39;
numactl -i 0-3 -N 4-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
esac
#mpirun -n 1 numactl -i 0-3 -N 0-3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125; : -n 1 numactl -i 4-7 -N 4-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
4)
case $&#123;PMI_RANK_my&#125; in
0)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;0-15&#39;
numactl -i 0-7 -N 0-1 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 2-3 -N 0-1 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
1)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;16-31&#39;
numactl -i 0-7 -N 2-3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 4-5 -N 2-3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
2)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;32-47&#39;
numactl -i 0-7 -N 4-5 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 6-7 -N 4-5 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
3)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;48-63&#39;
numactl -i 0-7 -N 6-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 0-1 -N 6-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
esac
;;
8)
case $&#123;PMI_RANK_my&#125; in
0)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;0-7&#39;
numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 4 -N 0 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#.&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
1)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;8-15&#39;
numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 2 -N 1 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#.&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
2)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;16-23&#39;
numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 6 -N 2 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#.&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
3)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;24-31&#39;
numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 1 -N 3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#.&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
4)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;32-39&#39;
numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 0 -N 4 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#.&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
5)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;40-47&#39;
numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 7 -N 5 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#.&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
6)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;48-55&#39;
numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 5 -N 6 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#.&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
7)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;56-63&#39;
numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#numactl -i 3 -N 7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#.&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
esac
;;
16)
case $&#123;PMI_RANK_my&#125; in
0)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;0-3&#39;
numactl -i 0-7 -C 0-3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
1)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;4-7&#39;
numactl -i 0-7 -C 4-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
2)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;8-11&#39;
numactl -i 0-7 -C 8-11 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
3)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;12-15&#39;
numactl -i 0-7 -C 12-15 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
4)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;16-19&#39;
numactl -i 0-7 -C 16-19 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
5)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;20-23&#39;
numactl -i 0-7 -C 20-23 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
6)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;24-27&#39;
numactl -i 0-7 -C 24-27 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
7)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;28-31&#39;
numactl -i 0-7 -C 28-31 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
8)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;32-35&#39;
numactl -i 0-7 -C 32-35 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
9)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;36-39&#39;
numactl -i 0-7 -C 36-39 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
10)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;40-43&#39;
numactl -i 0-7 -C 40-43 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
11)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;44-47&#39;
numactl -i 0-7 -C 44-47 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
12)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;48-51&#39;
numactl -i 0-7 -C 48-51 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
13)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;52-55&#39;
numactl -i 0-7 -C 52-55 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
14)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;56-59&#39;
numactl -i 0-7 -C 56-59 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
15)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;60-63&#39;
numactl -i 0-7 -C 60-63 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
esac
;;
32)
#export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
#numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#;;
case $&#123;PMI_RANK_my&#125; in
0)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;0-1&#39;
numactl -i 0-7 -C 0-1 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
1)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;2-3&#39;
numactl -i 0-7 -C 2-3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
2)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;4-5&#39;
numactl -i 0-7 -C 4-5 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
3)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;6-7&#39;
numactl -i 0-7 -C 6-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
4)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;8-9&#39;
numactl -i 0-7 -C 8-9 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
5)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;10-11&#39;
numactl -i 0-7 -C 10-11 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
6)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;12-13&#39;
numactl -i 0-7 -C 12-13 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
7)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;14-15&#39;
numactl -i 0-7 -C 14-15 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
8)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;16-17&#39;
numactl -i 0-7 -C 16-17 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
9)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;18-19&#39;
numactl -i 0-7 -C 18-19 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
10)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;20-21&#39;
numactl -i 0-7 -C 20-21 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
11)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;22-23&#39;
numactl -i 0-7 -C 22-23 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
12)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;24-25&#39;
numactl -i 0-7 -C 24-25 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
13)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;26-27&#39;
numactl -i 0-7 -C 26-27 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
14)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;28-29&#39;
numactl -i 0-7 -C 28-29 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
15)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;30-31&#39;
numactl -i 0-7 -C 30-31 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
16)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;32-33&#39;
numactl -i 0-7 -C 32-33 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
17)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;34-35&#39;
numactl -i 0-7 -C 34-35 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
18)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;36-37&#39;
numactl -i 0-7 -C 36-37 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
19)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;38-39&#39;
numactl -i 0-7 -C 38-39 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
20)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;40-41&#39;
numactl -i 0-7 -C 40-41 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
21)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;42-43&#39;
numactl -i 0-7 -C 42-43 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
22)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;44-45&#39;
numactl -i 0-7 -C 44-45 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
23)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;46-47&#39;
numactl -i 0-7 -C 46-47 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
24)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;48-49&#39;
numactl -i 0-7 -C 48-49 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
25)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;50-51&#39;
numactl -i 0-7 -C 50-51 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
26)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;52-53&#39;
numactl -i 0-7 -C 52-53 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
27)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;54-55&#39;
numactl -i 0-7 -C 54-55 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
28)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;56-57&#39;
numactl -i 0-7 -C 56-57 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
29)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;58-59&#39;
numactl -i 0-7 -C 58-59 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
30)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;60-61&#39;
numactl -i 0-7 -C 60-61 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
31)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;62-63&#39;
numactl -i 0-7 -C 62-63 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
esac
;;
64)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
#export GOMP_CPU_AFFINITY&#x3D;&#39;0-63&#39;
#numactl -i 0-7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
#;;
case $&#123;PMI_RANK_my&#125; in
0)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;0&#39;
numactl -i 0-7 -C 0 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
1)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;1&#39;
numactl -i 0-7 -C 1 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
2)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;2&#39;
numactl -i 0-7 -C 2 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
3)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;3&#39;
numactl -i 0-7 -C 3 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
4)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;4&#39;
numactl -i 0-7 -C 4 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
5)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;5&#39;
numactl -i 0-7 -C 5 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
6)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;6&#39;
numactl -i 0-7 -C 6 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
7)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;7&#39;
numactl -i 0-7 -C 7 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
8)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;8&#39;
numactl -i 0-7 -C 8 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
9)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;9&#39;
numactl -i 0-7 -C 9 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
10)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;10&#39;
numactl -i 0-7 -C 10 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
11)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;11&#39;
numactl -i 0-7 -C 11 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
12)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;12&#39;
numactl -i 0-7 -C 12 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
13)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;13&#39;
numactl -i 0-7 -C 13 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
14)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;14&#39;
numactl -i 0-7 -C 14 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
15)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;15&#39;
numactl -i 0-7 -C 15 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
16)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;16&#39;
numactl -i 0-7 -C 16 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
17)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;17&#39;
numactl -i 0-7 -C 17 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
18)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;18&#39;
numactl -i 0-7 -C 18 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
19)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;19&#39;
numactl -i 0-7 -C 19 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
20)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;20&#39;
numactl -i 0-7 -C 20 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
21)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;21&#39;
numactl -i 0-7 -C 21 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
22)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;22&#39;
numactl -i 0-7 -C 22 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
23)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;23&#39;
numactl -i 0-7 -C 23 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
24)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;24&#39;
numactl -i 0-7 -C 24 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
25)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;25&#39;
numactl -i 0-7 -C 25 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
26)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;26&#39;
numactl -i 0-7 -C 26 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
27)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;27&#39;
numactl -i 0-7 -C 27 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
28)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;28&#39;
numactl -i 0-7 -C 28 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
29)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;29&#39;
numactl -i 0-7 -C 29 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
30)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;30&#39;
numactl -i 0-7 -C 30 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
31)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;31&#39;
numactl -i 0-7 -C 31 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
32)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;32&#39;
numactl -i 0-7 -C 32 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
33)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;33&#39;
numactl -i 0-7 -C 33 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
34)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;34&#39;
numactl -i 0-7 -C 34 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
35)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;35&#39;
numactl -i 0-7 -C 35 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
36)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;36&#39;
numactl -i 0-7 -C 36 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
37)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;37&#39;
numactl -i 0-7 -C 37 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
38)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;38&#39;
numactl -i 0-7 -C 38 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
39)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;39&#39;
numactl -i 0-7 -C 39 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
40)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;40&#39;
numactl -i 0-7 -C 40 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
41)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;41&#39;
numactl -i 0-7 -C 41 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
42)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;42&#39;
numactl -i 0-7 -C 42 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
43)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;43&#39;
numactl -i 0-7 -C 43 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
44)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;44&#39;
numactl -i 0-7 -C 44 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
45)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;45&#39;
numactl -i 0-7 -C 45 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
46)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;46&#39;
numactl -i 0-7 -C 46 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
47)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;47&#39;
numactl -i 0-7 -C 47 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
48)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;48&#39;
numactl -i 0-7 -C 48 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
49)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;49&#39;
numactl -i 0-7 -C 49 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
50)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;50&#39;
numactl -i 0-7 -C 50 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
51)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;51&#39;
numactl -i 0-7 -C 51 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
52)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;52&#39;
numactl -i 0-7 -C 52 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
53)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;53&#39;
numactl -i 0-7 -C 53 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
54)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;54&#39;
numactl -i 0-7 -C 54 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
55)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;55&#39;
numactl -i 0-7 -C 55 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
56)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;56&#39;
numactl -i 0-7 -C 56 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
57)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;57&#39;
numactl -i 0-7 -C 57 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
58)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;58&#39;
numactl -i 0-7 -C 58 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
59)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;59&#39;
numactl -i 0-7 -C 59 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
60)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;60&#39;
numactl -i 0-7 -C 60 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
61)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;61&#39;
numactl -i 0-7 -C 61 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
62)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;62&#39;
numactl -i 0-7 -C 62 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
63)
export OMP_NUM_THREADS&#x3D;$&#123;threads&#125;
export GOMP_CPU_AFFINITY&#x3D;&#39;63&#39;
numactl -i 0-7 -C 63 .&#x2F;xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;
;;
esac
;;
esac<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="8-2-编译问题"><a href="#8-2-编译问题" class="headerlink" title="8.2 编译问题"></a>8.2 编译问题</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-lc 
	解决找不到memcpy问题 
-lstdc++
	解决vtable for xxxx 问题
-lgcc_s
	undefined reference to &#96;_Unwind_Resume&#39;
	undefined reference to &#96;__popcountdi2&#39;
	
#include &lt;sys&#x2F;types.h&gt;
#include &lt;sys&#x2F;types.h&gt;
	 implicit declaration of function ‘fstat’

#include &lt;sys&#x2F;sysmacros.h&gt;
	implicit declaration of function ‘major’<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="十、Linux操作"><a href="#十、Linux操作" class="headerlink" title="十、Linux操作"></a>十、Linux操作</h1><h2 id="10-1-ncat端口转发"><a href="#10-1-ncat端口转发" class="headerlink" title="10.1 ncat端口转发"></a>10.1 ncat端口转发</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ncat --sh-exec &quot;ncat 25.8.27.6 15929&quot; -l 15929 --keep-open<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h1 id="十一、DDT安装"><a href="#十一、DDT安装" class="headerlink" title="十一、DDT安装"></a>十一、DDT安装</h1><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># cp Licence &#x2F;home&#x2F;gs&#x2F;tools&#x2F;arm&#x2F;forge&#x2F;licences&#x2F;
# cp Licence.14713 &#x2F;home&#x2F;gs&#x2F;tools&#x2F;arm&#x2F;licenceserver&#x2F;licences&#x2F;

export PATH&#x3D;&#x2F;opt&#x2F;mpi3.3&#x2F;bin:&#x2F;home&#x2F;gs&#x2F;tools&#x2F;arm&#x2F;forge&#x2F;bin:&#x2F;home&#x2F;gs&#x2F;tools&#x2F;arm&#x2F;licenceserver&#x2F;bin:$PATH
export LD_LIBRARY_PATH&#x3D;&#x2F;opt&#x2F;mpi3.3&#x2F;lib:$LD_LIBRARY_PATH
ifconfig eth3 hw ether 00:1b:21:14:15:60<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">#glex高速网版本的MPI改为本地调试用
export MPICH_NO_LOCAL&#x3D;0 &#x2F;&#x2F;？不一定需要
export MPICH_NEMESIS_NETMOD&#x3D;tcp
export PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;mpi3&#x2F;bin:$PATH
export LD_LIBRARY_PATH&#x3D;&#x2F;usr&#x2F;local&#x2F;mpi3&#x2F;lib:$LD_LIBRARY_PATH<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h1 id="十二、SPEC使用"><a href="#十二、SPEC使用" class="headerlink" title="十二、SPEC使用"></a>十二、SPEC使用</h1><h2 id="12-1-SPEC使用系统工具"><a href="#12-1-SPEC使用系统工具" class="headerlink" title="12.1 SPEC使用系统工具"></a>12.1 SPEC使用系统工具</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># SEPC设置使用系统的工具
vim &#x2F;home&#x2F;gs&#x2F;tools&#x2F;spack-v5&#x2F;etc&#x2F;spack&#x2F;defaults&#x2F;packages.yaml
# 参考：
..&#x2F;..&#x2F;..&#x2F;lib&#x2F;spack&#x2F;docs&#x2F;build_settings.rst<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="十三、mi协议"><a href="#十三、mi协议" class="headerlink" title="十三、mi协议"></a>十三、mi协议</h1><h2 id="13-1-使用mi启动调试"><a href="#13-1-使用mi启动调试" class="headerlink" title="13.1 使用mi启动调试"></a>13.1 使用mi启动调试</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">gs@ft-svr:~&#x2F;matrix$ gdb --interpreter mi test
&#x3D;thread-group-added,id&#x3D;&quot;i1&quot;
~&quot;GNU gdb (Ubuntu 8.2.91.20190405-0ubuntu3) 8.2.91.20190405-git\n&quot;
~&quot;Copyright (C) 2019 Free Software Foundation, Inc.\n&quot;
~&quot;License GPLv3+: GNU GPL version 3 or later &lt;http:&#x2F;&#x2F;gnu.org&#x2F;licenses&#x2F;gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.&quot;
~&quot;\nType \&quot;show copying\&quot; and \&quot;show warranty\&quot; for details.\n&quot;
~&quot;This GDB was configured as \&quot;aarch64-linux-gnu\&quot;.\n&quot;
~&quot;Type \&quot;show configuration\&quot; for configuration details.\n&quot;
~&quot;For bug reporting instructions, please see:\n&quot;
~&quot;&lt;http:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;gdb&#x2F;bugs&#x2F;&gt;.\n&quot;
~&quot;Find the GDB manual and other documentation resources online at:\n    &lt;http:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;gdb&#x2F;documentation&#x2F;&gt;.&quot;
~&quot;\n\n&quot;
~&quot;For help, type \&quot;help\&quot;.\n&quot;
~&quot;Type \&quot;apropos word\&quot; to search for commands related to \&quot;word\&quot;...\n&quot;
~&quot;Reading symbols from test...\n&quot;
(gdb)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="13-2-断点命令（BreakPoint）"><a href="#13-2-断点命令（BreakPoint）" class="headerlink" title="13.2 断点命令（BreakPoint）"></a>13.2 断点命令（BreakPoint）</h2><h3 id="13-2-1-break-after"><a href="#13-2-1-break-after" class="headerlink" title="13.2.1 -break-after"></a>13.2.1 -break-after</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-break-after number count
第number个断点在执行count次后有效<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="13-2-2-break-condition"><a href="#13-2-2-break-condition" class="headerlink" title="13.2.2 -break-condition"></a>13.2.2 -break-condition</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-break-condition number expr
第number个断点在表达式expr为true时有效<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="13-2-3-break-delete"><a href="#13-2-3-break-delete" class="headerlink" title="13.2.3 -break-delete"></a>13.2.3 -break-delete</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-break-delete(breakpoint number)+
删除指定number的多个断点<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="13-2-4-break-disable"><a href="#13-2-4-break-disable" class="headerlink" title="13.2.4 -break-disable"></a>13.2.4 -break-disable</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-break-disable(breakpoint number)+
使用指定Number的多个断点失效<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="13-2-5-break-enable"><a href="#13-2-5-break-enable" class="headerlink" title="13.2.5 -break-enable"></a>13.2.5 -break-enable</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-break-enable(breakpoint number)+
使用指定Number的多个断点生效<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="13-2-6-break-info"><a href="#13-2-6-break-info" class="headerlink" title="13.2.6 -break-info"></a>13.2.6 -break-info</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-break-info breakpoint
得到指定断点的信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="13-2-7-break-insert"><a href="#13-2-7-break-insert" class="headerlink" title="13.2.7 -break-insert"></a>13.2.7 -break-insert</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-break-insert
	-t				插入临时断点
	-h				插入硬件断点
	-r				插入正则断点，当函数名匹配正则表达式时生效
	-c condition    插入条件断点
	-i ignore-count 插入一个指定无效次数的断点
	-p thread  		
	line | addr(func) <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="13-2-8-break-list"><a href="#13-2-8-break-list" class="headerlink" title="13.2.8. -break-list"></a>13.2.8. -break-list</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-break-list
显示已插入的断点列表<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="13-2-9-break-watch"><a href="#13-2-9-break-watch" class="headerlink" title="13.2.9 -break-watch"></a>13.2.9 -break-watch</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-break-watch [-a|-r] variable
创建一个观察点，-a标识对variable读写时有效，-r标识只读时有效<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h2 id="13-3-程序环境命令-Program-Context"><a href="#13-3-程序环境命令-Program-Context" class="headerlink" title="13.3 程序环境命令(Program Context)"></a>13.3 程序环境命令(Program Context)</h2><h2 id="13-4-线程-thread"><a href="#13-4-线程-thread" class="headerlink" title="13.4 线程(thread)"></a>13.4 线程(thread)</h2><h2 id="13-5-程序执行-Program-Execution"><a href="#13-5-程序执行-Program-Execution" class="headerlink" title="13.5 程序执行(Program Execution)"></a>13.5 程序执行(Program Execution)</h2><h2 id="13-6-栈-Stack"><a href="#13-6-栈-Stack" class="headerlink" title="13.6 栈(Stack)"></a>13.6 栈(Stack)</h2><h2 id="13-7-变量-Variable"><a href="#13-7-变量-Variable" class="headerlink" title="13.7 变量(Variable)"></a>13.7 变量(Variable)</h2><h2 id="13-8-数据-Data"><a href="#13-8-数据-Data" class="headerlink" title="13.8 数据(Data)"></a>13.8 数据(Data)</h2><h2 id="13-9-跟踪点-TracePoint"><a href="#13-9-跟踪点-TracePoint" class="headerlink" title="13.9 跟踪点(TracePoint)"></a>13.9 跟踪点(TracePoint)</h2><h2 id="13-10-符号-Symbol"><a href="#13-10-符号-Symbol" class="headerlink" title="13.10 符号(Symbol)"></a>13.10 符号(Symbol)</h2><h2 id="13-11-文件-File"><a href="#13-11-文件-File" class="headerlink" title="13.11 文件(File)"></a>13.11 文件(File)</h2><h2 id="13-12-目标数据-Target-Manipulation"><a href="#13-12-目标数据-Target-Manipulation" class="headerlink" title="13.12 目标数据(Target Manipulation)"></a>13.12 目标数据(Target Manipulation)</h2><h2 id="13-13-其他"><a href="#13-13-其他" class="headerlink" title="13.13 其他"></a>13.13 其他</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">-enable-pretty-printing
-var-create - * map
-var-list-children --all-values var1 0 10

-data-evaluate-expression map
^done,value&#x3D;&quot;std::map with 140737353945088 elements&lt;error reading variable: Cannot access memory at address 0x1f0fc35f415e51&gt;&quot;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">&#x2F;&#x2F;    &#x2F;&#x2F; 设置标记类型与颜色
&#x2F;&#x2F;    this-&gt;markerDefine(QsciScintilla::Circle, 0);
&#x2F;&#x2F;    this-&gt;setMarkerBackgroundColor(QColor(&quot;#ee6666&quot;), 0);
&#x2F;&#x2F;    this-&gt;markerDefine(QsciScintilla::Circle, 1);
&#x2F;&#x2F;    this-&gt;setMarkerBackgroundColor(QColor(&quot;#aaaaaa&quot;), 1);
&#x2F;&#x2F;    this-&gt;markerDefine(QsciScintilla::RightArrow, 2);
&#x2F;&#x2F;    this-&gt;setMarkerBackgroundColor(QColor(&quot;#eaf593&quot;), 2);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="十四、Git改密码"><a href="#十四、Git改密码" class="headerlink" title="十四、Git改密码"></a>十四、Git改密码</h1><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">gitlab-rails console production

irb(main):002:0&gt; user&#x3D;User.where(email:&#39;cuiyingbomail@163.com&#39;).first
&#x3D;&gt; #&lt;User id:30 @cyb&gt;
irb(main):003:0&gt; user.password&#x3D;12345678
&#x3D;&gt; 12345678
irb(main):004:0&gt; user.password_confirmation&#x3D;12345678
&#x3D;&gt; 12345678
irb(main):005:0&gt; user.save!
Enqueued ActionMailer::DeliveryJob (Job ID: 540244db-c6ec-44f9-880e-72338b955aa5) to Sidekiq(mailers) with arguments: &quot;DeviseMailer&quot;, &quot;password_change&quot;, &quot;deliver_now&quot;, #&lt;GlobalID:0x00007f57f5da3208 @uri&#x3D;#&lt;URI::GID gid:&#x2F;&#x2F;gitlab&#x2F;User&#x2F;30&gt;&gt;
&#x3D;&gt; true
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="十五、YHPDE（eclipse）FT部署"><a href="#十五、YHPDE（eclipse）FT部署" class="headerlink" title="十五、YHPDE（eclipse）FT部署"></a>十五、YHPDE（eclipse）FT部署</h1><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">1、安装eclipse:
	gitlab
2、插件安装，参考手册
2、新版SLURM需要
vim org.eclipse.ptp.rm.slurm.proxy_4.0.7.201104291906&#x2F;src&#x2F;ptp_slurm_proxy.c
1625行：slurm_allocation_lookup_lite -&gt; slurm_allocation_lookup
2942行: primary &#x3D; 1; -&gt;  primary &#x3D; 0;
2943行：secondary &#x3D; 2; -&gt; secondary &#x3D; 1;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%B7%A5%E4%BD%9C/" rel="tag"># 工作</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/01-%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%E8%A7%84%E5%88%92/" rel="prev" title="运维之综合架构--01-整体架构规划">
      <i class="fa fa-chevron-left"></i> 运维之综合架构--01-整体架构规划
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/07/06/02_%E6%B5%8B%E8%AF%95/01_POC%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/" rel="next" title="国产化POC测试工具使用指南">
      国产化POC测试工具使用指南 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E-%E6%B1%87%E6%80%BB"><span class="nav-number">1.</span> <span class="nav-text">测试工具使用说明-汇总</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81SPEC-CPU-2017-%E6%B5%8B%E8%AF%95"><span class="nav-number">2.</span> <span class="nav-text">一、SPEC CPU 2017 测试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-%E6%A6%82%E8%BF%B0"><span class="nav-number">2.1.</span> <span class="nav-text">1.1 概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85"><span class="nav-number">2.2.</span> <span class="nav-text">1.2 工具安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-%E6%B5%8B%E8%AF%95%E6%AD%A5%E9%AA%A4"><span class="nav-number">2.3.</span> <span class="nav-text">1.3 测试步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-%E6%B5%8B%E8%AF%95%E4%BC%98%E5%8C%96"><span class="nav-number">2.4.</span> <span class="nav-text">1.4 测试优化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-%E5%85%B6%E4%BB%96%E4%BA%8B%E9%A1%B9%EF%BC%9A"><span class="nav-number">2.5.</span> <span class="nav-text">1.5 其他事项：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81SPEC-CPU-2006-%E6%B5%8B%E8%AF%95"><span class="nav-number">3.</span> <span class="nav-text">二、SPEC CPU 2006 测试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-%E6%A6%82%E8%BF%B0"><span class="nav-number">3.1.</span> <span class="nav-text">2.1 概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-%E6%B5%8B%E8%AF%95%E6%AD%A5%E9%AA%A4"><span class="nav-number">3.2.</span> <span class="nav-text">2.2 测试步骤</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E3%80%81-SPEC-OMP-2012-%E6%B5%8B%E8%AF%95"><span class="nav-number">4.</span> <span class="nav-text">三、 SPEC OMP 2012 测试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E6%A6%82%E8%BF%B0"><span class="nav-number">4.1.</span> <span class="nav-text">3.1 概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85"><span class="nav-number">4.2.</span> <span class="nav-text">3.2 工具安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-%E6%B5%8B%E8%AF%95%E6%AD%A5%E9%AA%A4"><span class="nav-number">4.3.</span> <span class="nav-text">3.3 测试步骤</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%9B%E3%80%81NPB-%E6%B5%8B%E8%AF%95"><span class="nav-number">5.</span> <span class="nav-text">四、NPB 测试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-%E6%A6%82%E8%BF%B0"><span class="nav-number">5.1.</span> <span class="nav-text">4.1 概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85"><span class="nav-number">5.2.</span> <span class="nav-text">4.2 工具安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-%E6%B5%8B%E8%AF%95%E6%AD%A5%E9%AA%A4"><span class="nav-number">5.3.</span> <span class="nav-text">4.3 测试步骤</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%94%E3%80%81Stream-%E6%B5%8B%E8%AF%95"><span class="nav-number">6.</span> <span class="nav-text">五、Stream 测试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-%E6%A6%82%E8%BF%B0"><span class="nav-number">6.1.</span> <span class="nav-text">5.1 概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85"><span class="nav-number">6.2.</span> <span class="nav-text">5.2 工具安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-%E6%B5%8B%E8%AF%95%E6%AD%A5%E9%AA%A4"><span class="nav-number">6.3.</span> <span class="nav-text">5.3 测试步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4-%E5%85%B6%E4%BB%96%E4%BA%8B%E9%A1%B9"><span class="nav-number">6.4.</span> <span class="nav-text">5.4 其他事项</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%AD%E3%80%81Linpack-%E6%B5%8B%E8%AF%95"><span class="nav-number">7.</span> <span class="nav-text">六、Linpack 测试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-%E6%A6%82%E8%BF%B0"><span class="nav-number">7.1.</span> <span class="nav-text">6.1 概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85"><span class="nav-number">7.2.</span> <span class="nav-text">6.2 工具安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-%E6%B5%8B%E8%AF%95%E6%AD%A5%E9%AA%A4"><span class="nav-number">7.3.</span> <span class="nav-text">6.3 测试步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-4-%E6%B5%8B%E8%AF%95%E4%BC%98%E5%8C%96%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="nav-number">7.4.</span> <span class="nav-text">6.4 测试优化（重点）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-5-HPL-dat%E4%BF%AE%E6%94%B9"><span class="nav-number">7.5.</span> <span class="nav-text">6.5 HPL.dat修改</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-6-%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99"><span class="nav-number">7.6.</span> <span class="nav-text">6.6 测试脚本编写</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-1-%E6%9C%AC%E5%9C%B0mpirun%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC%EF%BC%88Intel%E7%89%88%E6%9C%AC%EF%BC%89"><span class="nav-number">7.6.1.</span> <span class="nav-text">6.6.1 本地mpirun测试脚本（Intel版本）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-6-2-Slurm-srun%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%AC-FT%E7%89%88%E6%9C%AC"><span class="nav-number">7.7.</span> <span class="nav-text">6.6.2 Slurm srun测试脚本(FT版本)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-7-Bios%E8%AE%BE%E7%BD%AE"><span class="nav-number">7.8.</span> <span class="nav-text">6.7 Bios设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-8-%E7%BB%93%E6%9E%9C%E5%8F%8D%E9%A6%88"><span class="nav-number">7.9.</span> <span class="nav-text">6.8 结果反馈</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-9-%E9%A3%8E%E5%86%B7%E7%B3%BB%E7%BB%9Flinpack%E6%B5%8B%E8%AF%95%E5%85%A8%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95"><span class="nav-number">7.10.</span> <span class="nav-text">6.9 风冷系统linpack测试全过程记录</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%E3%80%81%E4%BA%86%E8%A7%A3%E9%A3%8E%E5%86%B7%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%9E%B6%E6%9E%84"><span class="nav-number">7.10.0.0.1.</span> <span class="nav-text">1、了解风冷系统的架构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%E3%80%81%E8%AE%A1%E7%AE%97%E6%AF%8F%E4%B8%AA%E8%8A%82%E7%82%B9%E7%9A%84%E7%90%86%E8%AE%BA%E5%B3%B0%E5%80%BC"><span class="nav-number">7.10.0.0.2.</span> <span class="nav-text">2、计算每个节点的理论峰值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%E3%80%81%E5%BC%80%E5%A7%8B%E6%B5%8B%E8%AF%95"><span class="nav-number">7.10.0.0.3.</span> <span class="nav-text">3、开始测试</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%83%E3%80%81Lmbench-%E6%B5%8B%E8%AF%95"><span class="nav-number">8.</span> <span class="nav-text">七、Lmbench 测试</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-%E6%A6%82%E8%BF%B0"><span class="nav-number">8.1.</span> <span class="nav-text">7.1 概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85"><span class="nav-number">8.2.</span> <span class="nav-text">7.2 工具安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-%E6%B5%8B%E8%AF%95%E6%AD%A5%E9%AA%A4"><span class="nav-number">8.3.</span> <span class="nav-text">7.3 测试步骤</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%AB%E3%80%81IOR-%E6%B5%8B%E8%AF%95%EF%BC%88%E6%9A%82%E6%97%A0%EF%BC%89"><span class="nav-number">9.</span> <span class="nav-text">八、IOR 测试（暂无）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B9%9D%E3%80%81alltoall%E6%B5%8B%E8%AF%95"><span class="nav-number">10.</span> <span class="nav-text">九、alltoall测试</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%99%84%E5%BD%95%EF%BC%9A%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E9%93%BE%E7%BC%96%E8%AF%91%E6%96%B9%E6%B3%95"><span class="nav-number">11.</span> <span class="nav-text">附录：常用工具链编译方法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81GCC%E7%BC%96%E8%AF%91"><span class="nav-number">11.1.</span> <span class="nav-text">一、GCC编译</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E4%BE%9D%E8%B5%96%E8%BD%AF%E4%BB%B6%E7%BC%96%E8%AF%91"><span class="nav-number">11.1.1.</span> <span class="nav-text">1.1 依赖软件编译</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-2-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85gmp"><span class="nav-number">11.1.1.1.</span> <span class="nav-text">1.1.2 编译安装gmp</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-3-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85mpfr"><span class="nav-number">11.1.1.2.</span> <span class="nav-text">1.1.3 编译安装mpfr</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-4-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85mpc"><span class="nav-number">11.1.1.3.</span> <span class="nav-text">1.1.4 编译安装mpc</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-5-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85isl"><span class="nav-number">11.1.1.4.</span> <span class="nav-text">1.1.5 编译安装isl</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81MPICH3%E7%BC%96%E8%AF%91"><span class="nav-number">11.2.</span> <span class="nav-text">二、MPICH3编译</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E3%80%81Redhat%E8%AE%BE%E7%BD%AE%E6%9C%AC%E5%9C%B0%E9%95%9C%E5%83%8F%E6%BA%90"><span class="nav-number">11.2.1.</span> <span class="nav-text">三、Redhat设置本地镜像源</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E6%89%BE%E4%B8%8D%E5%88%B0so%E5%BA%93%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="nav-number">11.3.</span> <span class="nav-text">四、找不到so库的解决方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E5%A4%8D%E5%88%B6%E4%BB%A5%E5%8F%8A%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E5%8D%A0%E7%94%A8"><span class="nav-number">11.4.</span> <span class="nav-text">五、复制以及查看端口占用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81%E6%9F%A5%E7%9C%8Bcpu%E4%B8%BB%E9%A2%91%E7%8E%87-%E5%92%8C-%E5%86%85%E5%AD%98%E4%BF%A1%E6%81%AF"><span class="nav-number">11.5.</span> <span class="nav-text">六、查看cpu主频率 和 内存信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81GLSL-1-50-is-not-supported"><span class="nav-number">11.6.</span> <span class="nav-text">七、GLSL 1.50 is not supported</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81%E9%99%84%E5%BD%95"><span class="nav-number">11.7.</span> <span class="nav-text">八、附录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-1-Linpack%E8%84%9A%E6%9C%AC"><span class="nav-number">11.7.1.</span> <span class="nav-text">8.1 Linpack脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-2-%E7%BC%96%E8%AF%91%E9%97%AE%E9%A2%98"><span class="nav-number">11.7.2.</span> <span class="nav-text">8.2 编译问题</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%81%E3%80%81Linux%E6%93%8D%E4%BD%9C"><span class="nav-number">12.</span> <span class="nav-text">十、Linux操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#10-1-ncat%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91"><span class="nav-number">12.1.</span> <span class="nav-text">10.1 ncat端口转发</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%81%E4%B8%80%E3%80%81DDT%E5%AE%89%E8%A3%85"><span class="nav-number">13.</span> <span class="nav-text">十一、DDT安装</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81SPEC%E4%BD%BF%E7%94%A8"><span class="nav-number">14.</span> <span class="nav-text">十二、SPEC使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#12-1-SPEC%E4%BD%BF%E7%94%A8%E7%B3%BB%E7%BB%9F%E5%B7%A5%E5%85%B7"><span class="nav-number">14.1.</span> <span class="nav-text">12.1 SPEC使用系统工具</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%81%E4%B8%89%E3%80%81mi%E5%8D%8F%E8%AE%AE"><span class="nav-number">15.</span> <span class="nav-text">十三、mi协议</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#13-1-%E4%BD%BF%E7%94%A8mi%E5%90%AF%E5%8A%A8%E8%B0%83%E8%AF%95"><span class="nav-number">15.1.</span> <span class="nav-text">13.1 使用mi启动调试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-2-%E6%96%AD%E7%82%B9%E5%91%BD%E4%BB%A4%EF%BC%88BreakPoint%EF%BC%89"><span class="nav-number">15.2.</span> <span class="nav-text">13.2 断点命令（BreakPoint）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-1-break-after"><span class="nav-number">15.2.1.</span> <span class="nav-text">13.2.1 -break-after</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-2-break-condition"><span class="nav-number">15.2.2.</span> <span class="nav-text">13.2.2 -break-condition</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-3-break-delete"><span class="nav-number">15.2.3.</span> <span class="nav-text">13.2.3 -break-delete</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-4-break-disable"><span class="nav-number">15.2.4.</span> <span class="nav-text">13.2.4 -break-disable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-5-break-enable"><span class="nav-number">15.2.5.</span> <span class="nav-text">13.2.5 -break-enable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-6-break-info"><span class="nav-number">15.2.6.</span> <span class="nav-text">13.2.6 -break-info</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-7-break-insert"><span class="nav-number">15.2.7.</span> <span class="nav-text">13.2.7 -break-insert</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-8-break-list"><span class="nav-number">15.2.8.</span> <span class="nav-text">13.2.8. -break-list</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-2-9-break-watch"><span class="nav-number">15.2.9.</span> <span class="nav-text">13.2.9 -break-watch</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-3-%E7%A8%8B%E5%BA%8F%E7%8E%AF%E5%A2%83%E5%91%BD%E4%BB%A4-Program-Context"><span class="nav-number">15.3.</span> <span class="nav-text">13.3 程序环境命令(Program Context)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-4-%E7%BA%BF%E7%A8%8B-thread"><span class="nav-number">15.4.</span> <span class="nav-text">13.4 线程(thread)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-5-%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C-Program-Execution"><span class="nav-number">15.5.</span> <span class="nav-text">13.5 程序执行(Program Execution)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-6-%E6%A0%88-Stack"><span class="nav-number">15.6.</span> <span class="nav-text">13.6 栈(Stack)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-7-%E5%8F%98%E9%87%8F-Variable"><span class="nav-number">15.7.</span> <span class="nav-text">13.7 变量(Variable)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-8-%E6%95%B0%E6%8D%AE-Data"><span class="nav-number">15.8.</span> <span class="nav-text">13.8 数据(Data)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-9-%E8%B7%9F%E8%B8%AA%E7%82%B9-TracePoint"><span class="nav-number">15.9.</span> <span class="nav-text">13.9 跟踪点(TracePoint)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-10-%E7%AC%A6%E5%8F%B7-Symbol"><span class="nav-number">15.10.</span> <span class="nav-text">13.10 符号(Symbol)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-11-%E6%96%87%E4%BB%B6-File"><span class="nav-number">15.11.</span> <span class="nav-text">13.11 文件(File)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-12-%E7%9B%AE%E6%A0%87%E6%95%B0%E6%8D%AE-Target-Manipulation"><span class="nav-number">15.12.</span> <span class="nav-text">13.12 目标数据(Target Manipulation)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#13-13-%E5%85%B6%E4%BB%96"><span class="nav-number">15.13.</span> <span class="nav-text">13.13 其他</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81Git%E6%94%B9%E5%AF%86%E7%A0%81"><span class="nav-number">16.</span> <span class="nav-text">十四、Git改密码</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%81%E4%BA%94%E3%80%81YHPDE%EF%BC%88eclipse%EF%BC%89FT%E9%83%A8%E7%BD%B2"><span class="nav-number">17.</span> <span class="nav-text">十五、YHPDE（eclipse）FT部署</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="GongSheng"
      src="/images/myavatar.png">
  <p class="site-author-name" itemprop="name">GongSheng</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">49</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">GongSheng</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
