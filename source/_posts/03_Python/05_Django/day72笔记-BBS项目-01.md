---
title: Day72-BBS项目-01
date: 2022-11-09 09:03:22
categories:
- Python
- 09_Django
tags:
---

“第72天BBS项目01学习笔记”



# 一、数据库创建及表同步 

>使用mysql替代自带的sqlite库

##  1.1 PyCharm创建项目

填写项目名

![image-20221109090600388](../../../img/image-20221109090600388.png)

 填写创建的app名，点击create创建

![image-20221109090626941](../../../img/image-20221109090626941.png)

## 1.2 Navicat创建数据库

新建数据库，填写完点击确定

![image-20221109090922485](../../../img/image-20221109090922485.png)

## 1.3 项目数据库配置

数据表整体设计

![BBS表关系图解](../../../img/BBS表关系图解.png)

### 1.3.1 设置数据库参数

编辑`settings.py`文件

![image-20221109091153564](../../../img/image-20221109091153564.png)

编辑`__init__.py`文件

![image-20221109091320409](../../../img/image-20221109091320409.png)

### 1.3.2 创建数据库模型(Models)

编辑`models.py`创建`UserInfo`表字段（用户表）

![image-20221109092251182](../../../img/image-20221109092251182.png)

往`create_time...`下面补充

```python
blog = models.OneToOneField(to='Blog', null=True)
```

编辑`setting.py`配置

![image-20221109092349880](../../../img/image-20221109092349880.png)

编辑`models.py`文件分别创建`Blog、Category、Tag、Article、UpAndDown、Comment`表字段

![image-20221109093918925](../../../img/image-20221109093918925.png)

![image-20221109094221737](../../../img/image-20221109094221737.png)

Category和Tag`两个下`都要补充

```python
blog = models.ForeignKey(to='Blog', null=True)
```

![image-20221109094400029](../../../img/image-20221109094400029.png)

Article往下补充外键字段

![image-20221109095451851](../../../img/image-20221109095451851.png)

![image-20221109095256704](../../../img/image-20221109095256704.png)

![image-20221109094705148](../../../img/image-20221109094705148.png)

### 1.3.2 迁移数据库创建表

make migrations

make migrate

## 1.4 foms组件代码编写

>如果你的项目至始至终只用到一个fomrs组件，那么写一个py文件即可，但是如果要用多个forms.py组件，那么可以创建一个文件夹，在文件夹内根据forms组件的功能的不同创建不同的py文件

编辑`urls.py`文件

![image-20221109103140977](../../../img/image-20221109103140977.png)

编辑`views.py`文件

![image-20221109103245373](../../../img/image-20221109103245373.png)

`templates`文件夹新建`注册页面`

![image-20221109103459697](../../../img/image-20221109103459697.png)

新建`myforms.py`文件，针对用户表的`forms`组件代码（为了 解耦合）

![image-20221109111008637](../../../img/image-20221109111008637.png)

![image-20221109111027000](../../../img/image-20221109111027000.png)

![image-20221109111037630](../../../img/image-20221109111037630.png)

![image-20221109111137936](../../../img/image-20221109111137936.png)

![image-20221109111253596](../../../img/image-20221109111253596.png)

![image-20221109111443463](../../../img/image-20221109111443463.png)

![image-20221109111557020](../../../img/image-20221109111557020.png)

## 1.5 搭建注册页面

导入forms组件

![image-20221109111819195](../../../img/image-20221109111819195.png)

编辑注册页面`register.html`

![image-20221109112150247](../../../img/image-20221109112150247.png)

再加

![image-20221109112408844](../../../img/image-20221109112408844.png)

## 1.6 用户头像实时展示

修改上传图片的标签

![image-20221109134014152](../../../img/image-20221109134014152.png)

效果

![image-20221109133928395](../../../img/image-20221109133928395.png)

但是选择图片，头像不实时显示，需要再改

![image-20221109134852217](../../../img/image-20221109134852217.png)

![image-20221109134910917](../../../img/image-20221109134910917.png)

效果：

![image-20221109141438049](../../../img/image-20221109141438049.png)

## 1.7 注册事件初步实现





编辑`views.py`

![image-20221110164642073](../../../img/image-20221110164642073.png)