---
title: Day58-Bootstrap
date: 2022-12-08 13:36:22
categories:
- C++
- 02_C高级编程
tags:
---

“C高级编程第2天学习笔记”

# 1 函数

## 1.1 宏函数

实际上是“宏替换”，定义的代码会展开

案例如下：

```c
#include <stdio.h>

#define MYADD(x, y) ((x) + (y)) // 不加括号会怎么样？

int main() {
        printf("%d\n", MYADD(2, 3) * 10);
}

```

宏函数在运行中会展开，即：

```c
printf("%d\n", MYADD(2,3));

// 会展开成
printf("%d\n", ((2) + (3) * 10); // 结果：50
```

如果定义的时候不加括号

```c
// 如下定义
#define MYADD(x, y) x + y

// 则会展开成
printf("%d\n", 2 + 3 * 10); // 结果：32
```

宏函数的特点：

1. 宏函数需要使用给小括号修饰，保证运算的完整性
2. 通常会将频繁、短小的函数写成宏函数
3. 宏函数比普通函数在一定程度上要效率高些，省去普通函数入栈、出栈的时间开销（以空间换时间）

## 1.2 普通函数的调用模型